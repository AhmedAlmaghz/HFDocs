# ุงูููุงุฐุฌ ุงูููุฏุฑุจุฉ ูุณุจููุง ูููุต ุฅูู ููุงู ุตูุชู 

ุจุงูููุงุฑูุฉ ูุน ููุงู ุงูุชุนุฑู ุงูุชููุงุฆู ุนูู ุงูููุงู (ASR) ูุชุตููู ุงูุตูุชุ ููุงู ุนุฏุฏ ุฃูู ุจูุซูุฑ ูู ููุงุท ุชูุชูุด ุงูููุงุฐุฌ ุงูููุฏุฑุจุฉ ูุณุจููุง ุงููุชุงุญุฉ. ุนูู ูููุน ๐ค Hubุ ุณุชุฌุฏ ูุง ููุฑุจ ูู 300 ููุทุฉ ุชูุชูุด ููุงุณุจุฉ. ูู ุจูู ูุฐู ุงูููุงุฐุฌ ุงูููุฏุฑุจุฉ ูุณุจููุงุ ุณูุฑูุฒ ุนูู ุจููุชูู ูุชุงุญุชูู ุจุณูููุฉ ูู ูู ููุชุจุฉ ๐ค Transformers - SpeechT5 ู Massive Multilingual Speech (MMS). ูู ูุฐุง ุงููุณูุ ุณูุณุชูุดู ููููุฉ ุงุณุชุฎุฏุงู ูุฐู ุงูููุงุฐุฌ ุงูููุฏุฑุจุฉ ูุณุจููุง ูู ููุชุจุฉ Transformers ูููุต ุฅูู ููุงู ุตูุชู.

## SpeechT5

[SpeechT5](https://arxiv.org/abs/2110.07205) ูู ูููุฐุฌ ูุดุฑู Junyi Ao et al. ูู Microsoft ูุงุฏุฑ ุนูู ุงูุชุนุงูู ูุน ูุฌููุนุฉ ูู ููุงู ุงูููุงู. ุจูููุง ูุฑูุฒ ูู ูุฐู ุงููุญุฏุฉ ุนูู ุฌุงูุจ ุงููุต ุฅูู ููุงู ุตูุชูุ ูููู ุชุฎุตูุต ูุฐุง ุงููููุฐุฌ ูููุงู ุงูููุงู ุฅูู ูุต (ุงูุชุนุฑู ุงูุชููุงุฆู ุนูู ุงูููุงู ุฃู ุงูุชุนุฑู ุนูู ุงููุชุญุฏุซ)ุ ููุฐูู ุงูููุงู ุฅูู ููุงู (ุนูู ุณุจูู ุงููุซุงูุ ุชุญุณูู ุงูููุงู ุฃู ุงูุชุญููู ุจูู ุฃุตูุงุช ูุฎุชููุฉ). ููุฑุฌุน ุฐูู ุฅูู ููููุฉ ุชุตููู ุงููููุฐุฌ ูุชุฏุฑูุจู ุงููุณุจู.

ูู ููุจ SpeechT5 ููุฌุฏ ูููุฐุฌ ุชุดููุฑ ูู ุชุดููุฑ Transformer ุนุงุฏู. ุชูุงููุง ูุซู ุฃู ูุญูู ุขุฎุฑุ ุชููู ุดุจูุฉ ุงูุชุฑููุฒ ูุงููู ุจุชุดููุฑ ุชุณูุณู ุฅูู ุชุญููู ุชุณูุณู ุจุงุณุชุฎุฏุงู ุงูุชูุซููุงุช ุงููุฎููุฉ. ูุฐุง ุงูุนููุฏ ุงูููุฑู ูููุญูู ูู ููุณู ูุฌููุน ุงูููุงู ุงูุชู ูุฏุนููุง SpeechT5.

ูุชู ุงุณุชููุงู ูุฐุง ุงููุญูู ุจุณุชุฉ ุดุจูุงุช _pre-nets_ ู _post-nets_ ุฎุงุตุฉ ุจุงููุถุน (ุงูููุงู/ุงููุต). ูุชู ูุนุงูุฌุฉ ุงูููุงู ุฃู ุงููุต ุงููุฏุฎู (ุงุนุชูุงุฏูุง ุนูู ุงููููุฉ) ูู ุฎูุงู ุดุจูุฉ _pre-net_ ุงูููุงุจูุฉ ููุญุตูู ุนูู ุงูุชูุซููุงุช ุงููุฎููุฉ ุงูุชู ูููู ูููุญูู ุงุณุชุฎุฏุงููุง. ุซู ูุชู ุชูุฑูุฑ ุฅุฎุฑุงุฌ ุงููุญูู ุฅูู ุดุจูุฉ _post-net_ ุงูุชู ุณุชุณุชุฎุฏูู ูุชูููุฏ ุงูุฅุฎุฑุงุฌ ูู ุงููุถุน ุงููุณุชูุฏู.

ููุฐุง ูุจุฏู ุงูุชุตููู (ุงูุตูุฑุฉ ูู ุงููุฑูุฉ ุงูุฃุตููุฉ):

<div class="flex justify-center">
<img src="https://huggingface.co/datasets/huggingface/documentation-images/resolve/main/blog/speecht5/architecture.jpg" alt="ุชุตููู SpeechT5 ูู ุงููุฑูุฉ ุงูุฃุตููุฉ">
</div>

ูุชู ุชุฏุฑูุจ SpeechT5 ูุณุจููุง ุจุงุณุชุฎุฏุงู ุจูุงูุงุช ููุงู ููุต ุบูุฑ ููุณููุฉ ุนูู ูุทุงู ูุงุณุนุ ููุญุตูู ุนูู ุชูุซูู ููุญุฏ ููุฎุชูู ุงูุฃูุถุงุน. ุฎูุงู ูุฑุญูุฉ ุงูุชุฏุฑูุจ ุงููุณุจูุ ูุชู ุงุณุชุฎุฏุงู ุฌููุน ุดุจูุงุช _pre-nets_ ู _post-nets_ ูู ููุณ ุงูููุช.

ุจุนุฏ ุงูุชุฏุฑูุจ ุงููุณุจูุ ูุชู ุถุจุท ุงูุนููุฏ ุงูููุฑู ุจุงููุงูู ููุชุฑููุฒ ููู ุงูุชุฑููุฒ ููู ูููุฉ ูุฑุฏูุฉ. ูู ูุฐู ุงูุฎุทูุฉุ ูุชู ุงุณุชุฎุฏุงู ุดุจูุงุช _pre-nets_ ู _post-nets_ ุฐุงุช ุงูุตูุฉ ุจุงููููุฉ ุงููุญุฏุฏุฉ ููุท. ุนูู ุณุจูู ุงููุซุงูุ ูุงุณุชุฎุฏุงู SpeechT5 ูููุต ุฅูู ููุงู ุตูุชูุ ุณุชุญุชุงุฌ ุฅูู ุดุจูุฉ ุงูุชุฑููุฒ ุงููุณุจูุฉ ูููุต ูุฅุฏุฎุงูุงุช ุงููุต ูุดุจูุงุช ูู ุชุดููุฑ _pre-net_ ู _post-nets_ ููููุงู ูุฅุฎุฑุงุฌ ุงูููุงู.

ูุณูุญ ูุฐุง ุงูููุฌ ุจุงูุญุตูู ุนูู ุนุฏุฉ ููุงุฐุฌ ูุถุจูุทุฉ ุจุดูู ุฏููู ูููุงู ุงูููุงู ุงููุฎุชููุฉ ูุงูุชู ุชุณุชููุฏ ุฌููุนูุง ูู ุงูุชุฏุฑูุจ ุงูุฃููู ุนูู ุงูุจูุงูุงุช ุบูุฑ ุงูููุณููุฉ.

<Tip>
ุนูู ุงูุฑุบู ูู ุฃู ุงูููุงุฐุฌ ุงููุถุจูุทุฉ ูุณุจููุง ุชุจุฏุฃ ุจุงุณุชุฎุฏุงู ููุณ ูุฌููุนุฉ ุงูุฃูุฒุงู ูู ุงููููุฐุฌ ุงูููุฏุฑุจ ูุณุจููุง ุงููุดุชุฑูุ ุฅูุง ุฃู ุงูุฅุตุฏุงุฑุงุช ุงูููุงุฆูุฉ ูุฎุชููุฉ ุชูุงููุง ูู ุงูููุงูุฉ. ูุง ููููู ุฃุฎุฐ ูููุฐุฌ ASR ูุถุจูุท ูุณุจููุง ูุงุณุชุจุฏุงู ุดุจูุงุช _pre-nets_ ู _post-net_ ููุญุตูู ุนูู ูููุฐุฌ TTS ูุนููุ ุนูู ุณุจูู ุงููุซุงู. SpeechT5 ูุฑูุ ูููู ููุณ ูุฑููุง ุฌุฏูุง ;)
</Tip>

ุฏุนููุง ูุฑู ูุง ูู ุดุจูุงุช _pre-nets_ ู _post-nets_ ุงูุชู ูุณุชุฎุฏููุง SpeechT5 ููููุฉ ุงููุต ุฅูู ููุงู ุตูุชู ุนูู ูุฌู ุงูุชุญุฏูุฏ:

* ุดุจูุฉ ุงูุชุฑููุฒ ุงููุณุจูุฉ ูููุต: ุทุจูุฉ ุชุถููู ูุตู ุชููู ุจุชุนููู ุฑููุฒ ูุตูุฉ ุฅูู ุงูุชูุซููุงุช ุงููุฎููุฉ ุงูุชู ูุชููุนูุง ุงููุดูุฑ. ูุฐุง ูุดุงุจู ููุง ูุญุฏุซ ูู ูููุฐุฌ NLP ูุซู BERT.
* ุดุจูุฉ ูู ุชุดููุฑ ุงูููุงู ุงููุณุจูุฉ: ุชุฃุฎุฐ ูุฐู ุงูุดุจูุฉ ูุฎุทุท Mel ุงูููุบุงุฑูุชูู ูุฅุฏุฎุงู ูุชุณุชุฎุฏู ุณูุณูุฉ ูู ุงูุทุจูุงุช ุงูุฎุทูุฉ ูุถุบุท ุงููุฎุทุท ุงูุทููู ุฅูู ุชูุซููุงุช ูุฎููุฉ.
* ุดุจูุฉ ูู ุชุดููุฑ ุงูููุงู ุงููุงุญูุฉ: ุชุชูุจุฃ ูุฐู ุงูุดุจูุฉ ุจุจุงูู ูุฅุถุงูุชู ุฅูู ุงููุฎุทุท ุงูุทููู ุงููุงุชุฌ ูุชุณุชุฎุฏู ูุชุญุณูู ุงููุชุงุฆุฌ.

ุนูุฏูุง ูุชู ุฏูุฌูุงุ ูุจุฏู ุชุตููู SpeechT5 ูููุต ุฅูู ููุงู ุตูุชู ุนูู ุงููุญู ุงูุชุงูู:

<div class="flex justify-center">
<img src="https://huggingface.co/datasets/huggingface/documentation-images/resolve/main/blog/speecht5/tts.jpg" alt="ุชุตููู SpeechT5 ูููุต ุฅูู ููุงู ุตูุชู">
</div>

ููุง ุชุฑููุ ูุฅู ุงูุฅุฎุฑุงุฌ ูู ูุฎุทุท Mel ุงูููุบุงุฑูุชูู ูููุณ ููุฌุฉ ููุงุฆูุฉ. ุฅุฐุง ููุช ุชุชุฐูุฑุ ููุฏ ุชุทุฑููุง ุจุงุฎุชุตุงุฑ ุฅูู ูุฐุง ุงูููุถูุน ูู [ุงููุญุฏุฉ 3](../chapter3/introduction#spectrogram-output). ูู ุงูุดุงุฆุน ุฃู ุชููู ุงูููุงุฐุฌ ุงูุชู ุชููุฏ ุงูุตูุช ุจุฅูุชุงุฌ ูุฎุทุท Mel ุงูููุบุงุฑูุชููุ ูุงูุฐู ูุฌุจ ุชุญูููู ุฅูู ููุฌุฉ ุจุงุณุชุฎุฏุงู ุดุจูุฉ ุนุตุจูุฉ ุฅุถุงููุฉ ุชูุนุฑู ุจุงุณู vocoder.

ุฏุนููุง ูุฑู ููู ููููู ุงูููุงู ุจุฐูู.

ุฃููุงูุ ุฏุนูุง ูุญูู ูููุฐุฌ SpeechT5 ูููุต ุฅูู ููุงู ุตูุชู ุงููุถุจูุท ูุณุจููุง ูู ๐ค Hubุ ุฌูุจูุง ุฅูู ุฌูุจ ูุน ูุงุฆู ุงููุนุงูุฌ ุงููุณุชุฎุฏู ููุชุดููุฑ ูุงุณุชุฎุฑุงุฌ ุงูููุฒุงุช:

```python
from transformers import SpeechT5Processor, SpeechT5ForTextToSpeech

processor = SpeechT5Processor.from_pretrained("microsoft/speecht5_tts")
model = SpeechT5ForTextToSpeech.from_pretrained("microsoft/speecht5_tts")
```

ุจุนุฏ ุฐููุ ูููู ุจุชุดููุฑ ูุต ุงูุฅุฏุฎุงู.

```python
inputs = processor(text="Don't count the days, make the days count.", return_tensors="pt")
```

ูุง ููุชุตุฑ ูููุฐุฌ SpeechT5 ูููุต ุฅูู ููุงู ุตูุชู ุนูู ุฅูุดุงุก ููุงู ูุตูุช ูุชุญุฏุซ ูุงุญุฏ. ุจุฏูุงู ูู ุฐููุ ูุฅูู ูุณุชุฎุฏู ูุง ูุณูู embeddings ูููุชุญุฏุซ ุงูุชู ุชูุชูุท ุฎุตุงุฆุต ุตูุช ุงููุชุญุฏุซ.

<Tip>
ุชุนุฏ embeddings ูููุชุญุฏุซ ุทุฑููุฉ ูุชูุซูู ูููุฉ ุงููุชุญุฏุซ ุจุทุฑููุฉ ูุถุบูุทุฉุ ููุชุฌู ุจุญุฌู ุซุงุจุชุ ุจุบุถ ุงููุธุฑ ุนู ุทูู ุงูููุงู. ุชูุชูุท ูุฐู embeddings ูุนูููุงุช ุฃุณุงุณูุฉ ุญูู ุตูุช ุงููุชุญุฏุซ ููุจุฑุฉ ุตูุชู ูุทุจูุฉ ุตูุชู ูุบูุฑูุง ูู ุงูุฎุตุงุฆุต ุงููุฑูุฏุฉ ุงูุชู ุชููุฒ ูุชุญุฏุซูุง ุนู ุขุฎุฑ. ูููู ุงุณุชุฎุฏุงู ูุฐู embeddings ููุชุญูู ูู ุงููุชุญุฏุซุ ููุตู ุงููุชุญุฏุซุ ูุงูุชุนุฑู ุนูู ุงููุชุญุฏุซุ ูุงููุฒูุฏ.

ุชุชุถูู ุฃูุซุฑ ุงูุชูููุงุช ุดููุนูุง ูุชูููุฏ embeddings ูููุชุญุฏุซ ูุง ููู:

* ูุชุฌูุงุช ุงููููุฉ (I-Vectors): ุชุณุชูุฏ ูุชุฌูุงุช ุงููููุฉ ุฅูู ูููุฐุฌ ุฎููุท ุบุงูุณู (GMM). ููู ุชูุซู ุงููุชุญุฏุซูู ููุชุฌูุงุช ุซุงุจุชุฉ ุงูุฃุจุนุงุฏ ููุฎูุถุฉ ุงูุฃุจุนุงุฏ ูุดุชูุฉ ูู ุฅุญุตุงุฆูุงุช ูููุฐุฌ GMM ุงูุฎุงุต ุจุงููุชุญุฏุซุ ููุชู ุงูุญุตูู ุนูููุง ุจุทุฑููุฉ ุบูุฑ ุฎุงุถุนุฉ ููุฅุดุฑุงู.
* ูุชุฌูุงุช X: ูุชู ุงุดุชูุงู ูุชุฌูุงุช X ุจุงุณุชุฎุฏุงู ุงูุดุจูุงุช ุงูุนุตุจูุฉ ุงูุนูููุฉ (DNNs) ูุชูุชูุท ูุนูููุงุช ุงููุชุญุฏุซ ุนูู ูุณุชูู ุงูุฅุทุงุฑ ูู ุฎูุงู ุฏูุฌ ุงูุณูุงู ุงูุฒููู.

[ูุชุฌูุงุช X](https://www.danielpovey.com/files/2018_icassp_xvectors.pdf) ูู ุทุฑููุฉ ูุชุทูุฑุฉ ุชูุธูุฑ ุฃุฏุงุกู ูุชููููุง ุนูู ูุชุฌูุงุช ุงููููุฉ ูู ูุฌููุนุงุช ุงูุจูุงูุงุช ุงูุชูููููุฉ. ูุชู ุงุณุชุฎุฏุงู ุงูุดุจูุฉ ุงูุนุตุจูุฉ ุงูุนูููุฉ ููุญุตูู ุนูู ูุชุฌูุงุช X: ููู ุชุฏุฑุจ ุนูู ุงูุชูููุฒ ุจูู ุงููุชุญุฏุซููุ ูุชููู ุจุชุนููู ููุงู ูุชุบูุฑ ุงูุทูู ุฅูู embeddings ุซุงุจุชุฉ ุงูุฃุจุนุงุฏ. ููููู ุฃูุถูุง ุชุญููู embedding ูููุชุญุฏุซ ุชู ุญุณุงุจู ูุณุจููุงุ ูุงูุฐู ุณูุญุชูู ุนูู ุฎุตุงุฆุต ุงูููุงู ููุชุญุฏุซ ูุนูู.
</Tip>

ุฏุนููุง ูุญูู ูุซู ูุฐุง embedding ูููุชุญุฏุซ ูู ูุฌููุนุฉ ุจูุงูุงุช ุนูู Hub. ุชู ุงูุญุตูู ุนูู embeddings
ูู [ูุฌููุนุฉ ุจูุงูุงุช CMU ARCTIC](http://www.festvox.org/cmu_arctic/) ุจุงุณุชุฎุฏุงู
[ูุฐุง ุงูุจุฑูุงูุฌ ุงููุตู](https://huggingface.co/mechanicalsea/speecht5-vc/blob/main/manifest/utils/prep_cmu_arctic_spkemb.py)ุ ูููู
ูุฌุจ ุฃู ุชุนูู ุฃู embedding ูููุชุญุฏุซ.

```python
from datasets import load_dataset

embeddings_dataset = load_dataset("Matthijs/cmu-arctic-xvectors", split="validation")

import torch

speaker_embeddings = torch.tensor(embeddings_dataset[7306]["xvector"]).unsqueeze(0)
```

embedding ูููุชุญุฏุซ ุนุจุงุฑุฉ ุนู ูุตูููุฉ ูู ุงูุดูู (1ุ 512). ูุตู ูุฐุง embedding ูููุชุญุฏุซ ุตูุช ุฃูุซู.

ูู ูุฐู ุงููุฑุญูุฉุ ูุฏููุง ุจุงููุนู ูุฏุฎูุงุช ูุงููุฉ ูุชูููุฏ ูุฎุทุท Mel ุงูููุบุงุฑูุชูู ูุฅุฎุฑุงุฌุ ููููู ุงูููุงู ุจุฐูู ุนูู ุงููุญู ุงูุชุงูู:

```python
spectrogram = model.generate_speech(inputs["input_ids"], speaker_embeddings)
```

ููุชุฌ ุนู ุฐูู ูุตูููุฉ ูู ุงูุดูู (140ุ 80) ุชุญุชูู ุนูู ูุฎุทุท Mel ุงูููุบุงุฑูุชูู. ุงูุจุนุฏ ุงูุฃูู ูู ุทูู ุงูุชุณูุณูุ ููุฏ ูุฎุชูู ุจูู ุงูุชุดุบูู ุญูุซ ุชููู ุดุจูุฉ ูู ุชุดููุฑ ุงูููุงู ุงููุณุจูุฉ ุฏุงุฆููุง ุจุชุทุจูู ุฅุณูุงุท ุนูู ุชุณูุณู ุงูุฅุฏุฎุงู. ูุถูู ูุฐุง ุจุนุถ ุงูุชุจุงูู ุงูุนุดูุงุฆู ุฅูู ุงูููุงู ุงููููุฏ.

ููุน ุฐููุ ุฅุฐุง ููุง ูุฑูุฏ ุชูููุฏ ููุฌุฉ ุงูููุงูุ ููุฌุจ ุนูููุง ุชุญุฏูุฏ vocoder ูุชุญููู ุงููุฎุทุท ุงูุทููู ุฅูู ุชุญููู ุงูููุฌุฉ.
ูุธุฑููุงุ ููููู ุงุณุชุฎุฏุงู ุฃู vocoder ูุนูู ุนูู ูุฎุทุทุงุช Mel ุฐุงุช 80 ุฎุงูุฉ. ูุญุณู ุงูุญุธุ ุชููุฑ ููุชุจุฉ ๐ค Transformers vocoder
ูุงุฆู ุนูู HiFi-GAN. ุชู ุชูุฏูู ุฃูุฒุงููุง ุจูู ูุทู ูู ูุจู ุงููุคูููู ุงูุฃุตูููู ูู SpeechT5.

<Tip>
[HiFi-GAN](https://arxiv.org/pdf/2010.05646v2.pdf) ูู ุดุจูุฉ ุชูุงูุณูุฉ ูุชุทูุฑุฉ (GAN) ูุตููุฉ
ูุชุฑููุจ ุงูููุงู ุนุงูู ุงูุฏูุฉ. ุฅูู ูุงุฏุฑ ุนูู ุชูููุฏ ุตูุช ุนุงูู ุงูุฌูุฏุฉ ููุงูุนู ูู ุฅุฏุฎุงูุงุช ุงููุฎุทุท ุงูุทููู.

ุจุดูู ุนุงูุ ูุชููู HiFi-GAN ูู ูููุฏ ูุงุซููู ูู ุงููููุฒุงุช. ุงููููุฏ ุนุจุงุฑุฉ ุนู ุดุจูุฉ ุนุตุจูุฉ ูุชุนุงูุฏุฉ ุชูุงููุง ุชุฃุฎุฐ ูุฎุทุท Mel ูุฅุฏุฎุงู ูุชุชุนูู ุฅูุชุงุฌ ููุฌุงุช ุตูุชูุฉ ุฎุงู. ูุชูุซู ุฏูุฑ ุงููููุฒุงุช ูู ุงูุชูููุฒ ุจูู ุงูุตูุช ุงูุญูููู ูุงููููุฏ. ูุฑูุฒ ุงููููุฒุงู ุนูู ุฌูุงูุจ ูุฎุชููุฉ ูู ุงูุตูุช.

ูุชู ุชุฏุฑูุจ HiFi-GAN ุนูู ูุฌููุนุฉ ุจูุงูุงุช ูุจูุฑุฉ ูู ุชุณุฌููุงุช ุงูุตูุช ุนุงููุฉ ุงูุฌูุฏุฉ. ูุณุชุฎุฏู ูุง ูุณูู ุจุงูุชุฏุฑูุจ ุงูุชูุงูุณูุ
ุญูุซ ุชุชูุงูุณ ุดุจูุงุช ุงููููุฏ ูุงููููุฒ ุถุฏ ุจุนุถูุง ุงูุจุนุถ. ูู ุงูุจุฏุงูุฉุ ููุชุฌ ุงููููุฏ ุตูุชูุง ููุฎูุถ ุงูุฌูุฏุฉุ ููููู ูููููุฒ ุงูุชูููุฒ ุจููู ูุจูู ุงูุตูุช ุงูุญูููู ุจุณูููุฉ. ูุน ุชูุฏู ุงูุชุฏุฑูุจุ ูุญุณู ุงููููุฏ ุฅุฎุฑุงุฌูุ ูููุฏู ุฅูู ุฎุฏุงุน ุงููููุฒ. ูุตุจุญ ุงููููุฒุ ุจุฏูุฑูุ ุฃูุซุฑ ุฏูุฉ ูู ุงูุชูููุฒ ุจูู ุงูุตูุช ุงูุญูููู ูุงููููุฏ. ุชุณุงุนุฏ ุญููุฉ ุงูุชุนูููุงุช ูุฐู ููุง ุงูุดุจูุชูู ุนูู ุงูุชุญุณู ูุน ูุฑูุฑ ุงูููุช. ูู ุงูููุงูุฉุ ูุชุนูู HiFi-GAN ุชูููุฏ ุตูุช ุนุงูู ุงูุฏูุฉ ูุดุจู ุฎุตุงุฆุต ุจูุงูุงุช ุงูุชุฏุฑูุจ.
</Tip>

ูุนุฏ ุชุญููู vocoder ุณููุงู ูุซู ุฃู ูููุฐุฌ ๐ค Transformers ุขุฎุฑ.

```python
from transformers import SpeechT5HifiGan

vocoder = SpeechT5HifiGan.from_pretrained("microsoft/speecht5_hifigan")
```

ุงูุขู ูู ูุง ุนููู ูุนูู ูู ุชูุฑูุฑู ูุญุฌุฉ ุนูุฏ ุชูููุฏ ุงูููุงูุ ูุณูุชู ุชุญููู ุงูุฅุฎุฑุงุฌ ุชููุงุฆููุง ุฅูู ููุฌุฉ ุงูููุงู.

```python
speech = model.generate_speech(inputs["input_ids"], speaker_embeddings, vocoder=vocoder)
```

ุฏุนููุง ูุณุชูุน ุฅูู ุงููุชูุฌุฉ. ูุนุฏู ุงูุนููุงุช ุงูุฐู ูุณุชุฎุฏูู SpeechT5 ูู ุฏุงุฆููุง 16 ูููู ูุฑุชุฒ.

```python
from IPython.display import Audio

Audio(speech, rate=16000)
```

ุฑุงุฆุน!

ูุง ุชุชุฑุฏุฏ ูู ุงููุนุจ ุจุงุณุชุฎุฏุงู ุนุฑุถ ุชูุถูุญู ูููุต ุฅูู ููุงู ุตูุชู SpeechT5ุ ูุงุณุชูุดุงู ุฃุตูุงุช ุฃุฎุฑูุ ูุชุฌุฑุจุฉ ุฅุฏุฎุงูุงุช ูุฎุชููุฉ. ูุงุญุธ ุฃู ููุทุฉ ุงูุชูุชูุด ุงูููุฏุฑุจุฉ ูุณุจููุง ูุฐู ุชุฏุนู ุงููุบุฉ ุงูุฅูุฌููุฒูุฉ ููุท:

<iframe
src="https://matthijs-speecht5-tts-demo.hf.space"
frameborder="0"
width="850"
height="450">
</iframe>
## Bark

Bark ูู ูููุฐุฌ ุชุญููู ุงููุต ุฅูู ููุงู ูุนุชูุฏ ุนูู ุงููุญูู ุงูููุชุฑุญ ูู Suno AI ูู [suno-ai/bark](https://github.com/suno-ai/bark). ุนูู ุนูุณ SpeechT5ุ ูููู Bark ุจุชูููุฏ ููุฌุงุช ุตูุชูุฉ ุฎุงู ูุจุงุดุฑุฉุ ููุง ููุบู ุงูุญุงุฌุฉ ุฅูู ูุญูู ุชุฑููุฒ ูููุตู ุฃุซูุงุก ุงูุงุณุชูุชุงุฌ - ููู ูุชูุงูู ุจุงููุนู. ูุชู ุชุญููู ูุฐู ุงูููุงุกุฉ ูู ุฎูุงู ุงุณุชุฎุฏุงู [`Encodec`](https://huggingface.co/docs/transformers/main/en/model_doc/encodec)ุ ูุงูุฐู ูุนูู ููุญูู ุชุฑููุฒ ูุฃุฏุงุฉ ุถุบุท.

ูุน `Encodec`ุ ููููู ุถุบุท ุงูุตูุช ุฅูู ุชูุณูู ุฎููู ุงููุฒู ูุชูููู ุงุณุชุฎุฏุงู ุงูุฐุงูุฑุฉ ุซู ูู ุถุบุทู ูุงุณุชุนุงุฏุฉ ุงูุตูุช ุงูุฃุตูู. ูุชุณูู ุนูููุฉ ุงูุถุบุท ูุฐู 8 ูุชุจ ุฑููุฒุ ูุชููู ูู ูููุง ูู ูุชุฌูุงุช ุฃุนุฏุงุฏ ุตุญูุญุฉ. ูููู ุงุนุชุจุงุฑ ูุชุจ ุงูุฑููุฒ ูุฐู ูุชูุซููุงุช ุฃู ุชุถูููุงุช ููุตูุช ูู ุดูู ุนุฏุฏ ุตุญูุญ. ููู ุงูููู ููุงุญุธุฉ ุฃู ูู ูุชุงุจ ุฑููุฒ ูุงุญู ูุญุณู ุฌูุฏุฉ ุฅุนุงุฏุฉ ุจูุงุก ุงูุตูุช ูู ูุชุจ ุงูุฑููุฒ ุงูุณุงุจูุฉ. ูุธุฑูุง ูุฃู ูุชุจ ุงูุฑููุฒ ุนุจุงุฑุฉ ุนู ูุชุฌูุงุช ุฃุนุฏุงุฏ ุตุญูุญุฉุ ูููู ููููุงุฐุฌ ุงููุญููุฉ ุชุนูููุงุ ูุงูุชู ุชุชุณู ุจุงูููุงุกุฉ ุงูุดุฏูุฏุฉ ูู ูุฐู ุงููููุฉ. ูุฐุง ูุง ุชู ุชุฏุฑูุจ Bark ุฎุตูุตูุง ููููุงู ุจู.

ุจุดูู ุฃูุซุฑ ุชุญุฏูุฏูุงุ ูุชููู Bark ูู 4 ููุงุฐุฌ ุฑุฆูุณูุฉ:

- `BarkSemanticModel` (ูุดุงุฑ ุฅููู ุฃูุถูุง ุจุงุณู ูููุฐุฌ "ุงููุต"): ูููุฐุฌ ูุญูู ุชููุงุฆู ุงูุงูุญุฏุงุฑ ุงูุณุจุจู ุงูุฐู ูุฃุฎุฐ ูุฅุฏุฎุงู ูุต ูููุฒุ ููุชููุน ุฑููุฒ ูุตูุฉ ุฏูุงููุฉ ุชูุชูุท ูุนูู ุงููุต.
- `BarkCoarseModel` (ูุดุงุฑ ุฅููู ุฃูุถูุง ุจุงุณู ูููุฐุฌ "ุงูุตูุชูุงุช ุงูุฎุดูุฉ"): ูุญูู ุชููุงุฆู ุงูุงูุญุฏุงุฑ ุงูุณุจุจูุ ูุฃุฎุฐ ูุฅุฏุฎุงู ูุชุงุฆุฌ ูููุฐุฌ `BarkSemanticModel`. ูููุฏู ุฅูู ุงูุชูุจุค ุจุฃูู ูุชุงุจูู ุตูุชููู ุถุฑูุฑููู ูู EnCodec.
- `BarkFineModel` (ูููุฐุฌ "ุงูุตูุชูุงุช ุงูุฏูููุฉ")ุ ูุฐู ุงููุฑุฉ ูุญูู ุชุดููุฑ ุชููุงุฆู ุบูุฑ ุณุจุจูุ ูุงูุฐู ูุชูุจุฃ ุจุดูู ุชูุฑุงุฑู ุจูุชุจ ุงูุฑููุฒ ุงูุฃุฎูุฑุฉ ุจูุงุกู ุนูู ูุฌููุน ุชุถูููุงุช ูุชุจ ุงูุฑููุฒ ุงูุณุงุจูุฉ.
- ุจุนุฏ ุงูุชูุจุค ุจุฌููุน ูููุงุช ูุชุงุจ ุงูุฑููุฒ ูู `EncodecModel`ุ ูุณุชุฎุฏู Bark ููู ุชุฑููุฒ ุตููู ุงูุตูุช ุงูุฅุฎุฑุงุฌ.

ูู ุงูุฌุฏูุฑ ุจุงูุฐูุฑ ุฃู ูู ูุญุฏุฉ ูู ุงููุญุฏุงุช ุงูุซูุงุซ ุงูุฃููู ูููู ุฃู ุชุฏุนู ุชุถูููุงุช ุงููุชุญุฏุซ ุงูุดุฑุทูุฉ ูุดุฑุท ุงูุตูุช ููููุง ูุตูุช ูุญุฏุฏ ูุณุจููุง.

Bark ูู ูููุฐุฌ ุชุญููู ูุต ุฅูู ููุงู ูุงุจู ููุชุญูู ุจุดุฏุฉุ ููุง ูุนูู ุฃูู ููููู ุงุณุชุฎุฏุงูู ูุน ุฅุนุฏุงุฏุงุช ูุฎุชููุฉุ ููุง ุณูุฑู.

ูุจู ูู ุดูุกุ ูู ุจุชุญููู ุงููููุฐุฌ ููุนุงูุฌู.

ุฏูุฑ ุงููุนุงูุฌ ููุง ุฐู ุฌุงูุจูู:

1. ูุณุชุฎุฏู ูุชููููุฒุฉ ุงููุต ุงููุฏุฎูุ ุฃู ุชูุทูุนู ุฅูู ูุทุน ุตุบูุฑุฉ ูููู ูููููุฐุฌ ููููุง.
2. ูููู ุจุชุฎุฒูู ุชุถูููุงุช ุงููุชุญุฏุซุ ุฃู ุฅุนุฏุงุฏุงุช ุงูุตูุช ุงููุณุจูุฉ ุงูุชู ูููู ุฃู ุชุดุชุฑุท ุงูุชูููุฏ.

```python
from transformers import BarkModel, BarkProcessor

model = BarkModel.from_pretrained("suno/bark-small")
processor = BarkProcessor.from_pretrained("suno/bark-small")
```

Bark ูุชุนุฏุฏ ุงูุงุณุชุฎุฏุงูุงุช ูููููู ุฅูุดุงุก ุตูุช ูุดุฑูุท ุจููุชุจุฉ ุชุถูููุงุช ุงููุชุญุฏุซ [a speaker embeddings library](https://suno-ai.notion.site/8b8e8749ed514b0cbf3f699013548683?v=bc67cff786b04b50b3ceb756fd05f68c) ูุงูุชู ูููู ุชุญููููุง ุนุจุฑ ุงููุนุงูุฌ.

```python
# ุฅุถุงูุฉ ุชุถููู ุงููุชุญุฏุซ
inputs = processor("This is a test!", voice_preset="v2/en_speaker_3")

speech_output = model.generate(**inputs).cpu().numpy()
```

<audio controls>
<source src="https://huggingface.co/datasets/ylacombe/hf-course-audio-files/resolve/main/first_sample.wav" type="audio/wav">
ูุณุชุนุฑุถู ูุง ูุฏุนู ุนูุตุฑ ุงูุตูุช.
</audio>

ููููู ุฃูุถูุง ุฅูุดุงุก ุฎุทุจ ูุชุนุฏุฏุฉ ุงููุบุงุช ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงูุ ูุซู ุงููุฑูุณูุฉ ูุงูุตูููุฉ. ููููู ุงูุนุซูุฑ ุนูู ูุงุฆูุฉ ุจุงููุบุงุช ุงููุฏุนููุฉ [here](https://huggingface.co/suno/bark). ุนูู ุนูุณ MMSุ ุงูุชู ุชูุช ููุงูุดุชูุง ุฃุฏูุงูุ ููุณ ูู ุงูุถุฑูุฑู ุชุญุฏูุฏ ุงููุบุฉ ุงููุณุชุฎุฏูุฉุ ูููู ุจุจุณุงุทุฉ ุชูููู ุงููุต ุงููุฏุฎู ูุน ุงููุบุฉ ุงูููุงุจูุฉ.

```python
# ุฌุฑุจู ุจุงููุบุฉ ุงููุฑูุณูุฉุ ุฏุนูุง ูุถูู ุฃูุถูุง ุชุถููู ุงููุชุญุฏุซ ุจุงููุบุฉ ุงููุฑูุณูุฉ
inputs = processor("C'est un test!", voice_preset="v2/fr_speaker_1")

speech_output = model.generate(**inputs).cpu().numpy()
```

<audio controls>
<source src="https://huggingface.co/datasets/ylacombe/hf-course-audio-files/resolve/main/second_sample.wav" type="audio/wav">
ูุณุชุนุฑุถู ูุง ูุฏุนู ุนูุตุฑ ุงูุตูุช.
</audio>

ูููู ูููููุฐุฌ ุฃูุถูุง ุฅูุดุงุก ุงุชุตุงูุงุช **ุบูุฑ ููุธูุฉ** ูุซู ุงูุถุญู ูุงูุชููุฏ ูุงูุจูุงุก. ูู ูุง ุนููู ูุนูู ูู ุชุนุฏูู ุงููุต ุงููุฏุฎู ุจุงุณุชุฎุฏุงู ุงูุฅุดุงุฑุงุช ุงูููุงุณุจุฉ ูุซู `[clears throat]` ุฃู `[laughter]`ุ ุฃู `...`.

```python
inputs = processor(
"[clears throat] This is a test ... and I just took a long pause.",
voice_preset="v2/fr_speaker_1",
)

speech_output = model.generate(**inputs).cpu().numpy()
```

<audio controls>
<source src="https://huggingface.co/datasets/ylacombe/hf-course-audio-files/resolve/main/third_sample.wav" type="audio/wav">
ูุณุชุนุฑุถู ูุง ูุฏุนู ุนูุตุฑ ุงูุตูุช.
</audio>

ูููู ูู Bark ุญุชู ุฅูุดุงุก ุงูููุณููู. ููููู ุงููุณุงุนุฏุฉ ุนู ุทุฑูู ุฅุถุงูุฉ โช ููุงุญุธุงุช ููุณูููุฉ โช ุญูู ูููุงุชู.

```python
inputs = processor(
"โช In the mighty jungle, I'm trying to generate barks.",
)

speech_output = model.generate(**inputs).cpu().numpy()
```

<audio controls>
<source src="https://huggingface.co/datasets/ylacombe/hf-course-audio-files/resolve/main/fourth_sample.wav" type="audio/wav">
ูุณุชุนุฑุถู ูุง ูุฏุนู ุนูุตุฑ ุงูุตูุช.
</audio>

ุจุงูุฅุถุงูุฉ ุฅูู ุฌููุน ูุฐู ุงูููุฒุงุชุ ูุฏุนู Bark ูุนุงูุฌุฉ ุงูุฏููุนุงุชุ ููุง ูุนูู ุฃูู ููููู ูุนุงูุฌุฉ ุนุฏุฉ ุฅุฏุฎุงูุงุช ูุตูุฉ ูู ููุณ ุงูููุชุ ุนูู ุญุณุงุจ ุญุณุงุจ ุฃูุซุฑ ูุซุงูุฉ.

ุนูู ุจุนุถ ุงูุฃุฌูุฒุฉุ ูุซู ูุญุฏุงุช ูุนุงูุฌุฉ ุงูุฑุณููุงุช (GPUs)ุ ุชููู ุงูุฏูุนุงุช ูู ุฒูุงุฏุฉ ุณุฑุนุฉ ุงูุชูููุฏ ุจุดูู ุนุงูุ ููุง ูุนูู ุฃูู ูููู ุฃู ูููู ุฃุณุฑุน ูุชูููุฏ ุงูุนููุงุช ุฏูุนุฉ ูุงุญุฏุฉ ุจุฏูุงู ูู ุชูููุฏูุง ูุงุญุฏุฉ ุชูู ุงูุฃุฎุฑู.

ุฏุนููุง ูุญุงูู ุชูููุฏ ุจุนุถ ุงูุฃูุซูุฉ:

```python
input_list = [
"[clears throat] Hello uh ..., my dog is cute [laughter]",
"Let's try generating speech, with Bark, a text-to-speech model",
"โช In the jungle, the mighty jungle, the lion barks tonight โช",
]

# ุฃูุถูุง ุฅุถุงูุฉ ุชุถููู ุงููุชุญุฏุซ
inputs = processor(input_list, voice_preset="v2/en_speaker_3")

speech_output = model.generate(**inputs).cpu().numpy()
```

ุฏุนููุง ูุณุชูุน ุฅูู ุงูุฅุฎุฑุงุฌ ูุงุญุฏูุง ุชูู ุงูุขุฎุฑ.

ุงูุฃูู:

```python
from IPython.display import Audio

sampling_rate = model.generation_config.sample_rate
Audio(speech_output[0], rate=sampling_rate)
```

<audio controls>
<source src="https://huggingface.co/datasets/ylacombe/hf-course-audio-files/resolve/main/batch_1.wav" type="audio/wav">
ูุณุชุนุฑุถู ูุง ูุฏุนู ุนูุตุฑ ุงูุตูุช.
</audio>

ุงูุซุงูู:

```python
Audio(speech_output[1], rate=sampling_rate)
```

<audio controls>
<source src="https://huggingface.co/datasets/ylacombe/hf-course-audio-files/resolve/main/batch_2.wav" type="audio/wav">
ูุณุชุนุฑุถู ูุง ูุฏุนู ุนูุตุฑ ุงูุตูุช.
</audio>

ุงูุซุงูุซ:

```python
Audio(speech_output[2], rate=sampling_rate)
```

<audio controls>
<source src="https://huggingface.co/datasets/ylacombe/hf-course-audio-files/resolve/main/batch_3.wav" type="audio/wav">
ูุณุชุนุฑุถู ูุง ูุฏุนู ุนูุตุฑ ุงูุตูุช.
</audio>

<Tip>

ูุซู ููุงุฐุฌ ๐ค Transformers ุงูุฃุฎุฑูุ ูููู ุชุญุณูู Bark ูู ูุฌุฑุฏ ุจุถุน ุณุทูุฑ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูููุง ูุชุนูู ุจุงูุณุฑุนุฉ ูุชุฃุซูุฑ ุงูุฐุงูุฑุฉ. ููุนุฑูุฉ ููููุฉ ุงูููุงู ุจุฐููุ ุงููุฑ ููู [ูููุฑุฉ ุนุฑุถ ุชูุถูุญู Colab ูุฐู](https://colab.research.google.com/github/ylacombe/notebooks/blob/main/Benchmark_Bark_HuggingFace.ipynb).

</Tip>

## Massive Multilingual Speech (MMS)

ูุงุฐุง ูู ููุช ุชุจุญุซ ุนู ูููุฐุฌ ููุฏุฑุจ ูุณุจููุง ุจูุบุฉ ุฃุฎุฑู ุบูุฑ ุงูุฅูุฌููุฒูุฉุ Massive Multilingual Speech (MMS) ูู
ูููุฐุฌ ุขุฎุฑ ูุบุทู ูุฌููุนุฉ ูู ููุงู ุงูููุงูุ ููููู ูุฏุนู ุนุฏุฏูุง ูุจูุฑูุง ูู ุงููุบุงุช. ุนูู ุณุจูู ุงููุซุงูุ ููููู
ุชุฎููู ุงูููุงู ูู ุฃูุซุฑ ูู 1100 ูุบุฉ.

ุชุนุชูุฏ MMS ูููุต ุฅูู ููุงู ุนูู [VITS Kim et al.ุ 2021](https://arxiv.org/pdf/2106.06103.pdf)ุ ูุงูุชู ุชุนุฏ ูุงุญุฏุฉ ูู
ููุฌ TTS ุงูุฃูุซุฑ ุชูุฏููุง.

VITS ุนุจุงุฑุฉ ุนู ุดุจูุฉ ุชูููุฏ ุงูููุงู ุงูุชู ุชุญูู ุงููุต ุฅูู ููุฌุงุช ุตูุชูุฉ ุฎุงู. ุฅูู ูุนูู ูุซู ุดุจูุฉ ุงูุชุจุงูู ุงููุดุฑูุทุฉ ุงูุชููุงุฆูุฉุ ูุชูุฏูุฑ ููุฒุงุช ุงูุตูุช ูู ุงููุต ุงููุฏุฎู. ุฃููุงูุ ูุชู ุฅูุดุงุก ููุฒุงุช ุตูุชูุฉุ ููุซูุฉ ุนูู ุดูู ูุฎุทุทุงุช ุทูููุฉ. ุซู ูุชู ูู ุชุดููุฑ ุงูููุฌุงุช ุจุงุณุชุฎุฏุงู ุทุจูุงุช ุงูุชุญููู ุงูุชุฑุงููู ุงูููููุฉ ูู HiFi-GAN.

ุฃุซูุงุก ุงูุงุณุชูุชุงุฌุ ูุชู ุฒูุงุฏุฉ ุญุฌู ุฑููุฒ ุงููุต ูุชุญููููุง ุฅูู ููุฌุงุช ุจุงุณุชุฎุฏุงู ูุญุฏุฉ ุงูุชุฏูู ููููู HiFi-GAN.
ูุซู Barkุ ูุง ุชูุฌุฏ ุญุงุฌุฉ ุฅูู ูุญูู ุชุฑููุฒุ ุญูุซ ูุชู ุฅูุดุงุก ุงูููุฌุงุช ูุจุงุดุฑุฉ.

<Tip warning={true}>

ุชูุช ุฅุถุงูุฉ ูููุฐุฌ MMS ุฅูู ๐ค Transformers ูุคุฎุฑูุง ุฌุฏูุงุ ูุฐุง ุณูุชุนูู ุนููู ุชุซุจูุช ุงูููุชุจุฉ ูู ุงููุตุฏุฑ:

```bash
pip install git+https://github.com/huggingface/transformers.git
```

</Tip>

ุฏุนููุง ูุฌุฑุจ MMSุ ููุฑู ููู ูููููุง ุชุฎููู ุงูููุงู ุจูุบุฉ ุฃุฎุฑู ุบูุฑ ุงูุฅูุฌููุฒูุฉุ ุนูู ุณุจูู ุงููุซุงู ุงูุฃููุงููุฉ.

ุฃููุงูุ ุณูููู ุจุชุญููู ููุทุฉ ุชูุชูุด ุงููููุฐุฌ ููุนุงูุฌ ุงูุฑููุฒ ููุบุฉ ุงูุตุญูุญุฉ:

```python
from transformers import VitsModel, VitsTokenizer

model = VitsModel.from_pretrained("facebook/mms-tts-deu")
tokenizer = VitsTokenizer.from_pretrained("facebook/mms-tts-deu")
```

ูุฏ ุชูุงุญุธ ุฃูู ูุชุญููู ูููุฐุฌ MMS ุชุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู `VitsModel` ู`VitsTokenizer`. ูุฑุฌุน ุฐูู ุฅูู ุฃู MMS ูููุต ุฅูู ููุงู
ุชุนุชูุฏ ุนูู ูููุฐุฌ VITS ููุง ุฐูุฑูุง ุณุงุจููุง.

ุฏุนููุง ูุฎุชุงุฑ ูุต ูุซุงู ุจุงููุบุฉ ุงูุฃููุงููุฉุ ูุซู ูุฐูู ุงูุณุทุฑูู ุงูุฃูููู ูู ุฃุบููุฉ ููุฃุทูุงู:

```python
text_example = (
"Ich bin Schnappi das kleine Krokodil, komm aus รgypten das liegt direkt am Nil."
)
```

ูุฅูุดุงุก ุฅุฎุฑุงุฌ ููุฌูุ ูู ุจูุนุงูุฌุฉ ุงููุต ูุณุจููุง ุจุงุณุชุฎุฏุงู ุงููุนุงูุฌุ ููุฑุฑู ุฅูู ุงููููุฐุฌ:

```python
import torch

inputs = tokenizer(text_example, return_tensors="pt")
input_ids = inputs["input_ids"]


with torch.no_grad():
outputs = model(input_ids)

speech = outputs["waveform"]
```

ุฏุนููุง ูุณุชูุน ุฅูููุง:

```python
from IPython.display import Audio

Audio(speech, rate=16000)
```

ุฑุงุฆุน! ุฅุฐุง ููุช ุชุฑุบุจ ูู ุชุฌุฑุจุฉ MMS ุจูุบุฉ ุฃุฎุฑูุ ูุงุจุญุซ ุนู ููุงุท ุชูุชูุด "vits" ุงูุฃุฎุฑู [ุนูู ๐ค Hub](https://huggingface.co/models?filter=vits).

ูุงูุขู ุฏุนููุง ูุฑู ููู ููููู ุถุจุท ูููุฐุฌ TTS ุจููุณู!