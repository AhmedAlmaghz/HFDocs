# ุงูููุงุฐุฌ ุงููุนุงูุฌุฉ ูุณุจููุง ููุชุนุฑู ุงูุชููุงุฆู ุนูู ุงูููุงู 

ูู ูุฐุง ุงููุณูุ ุณูุดุฑุญ ููููุฉ ุงุณุชุฎุฏุงู ุงูุฏุงูุฉ `pipeline()` ููุงุณุชูุงุฏุฉ ูู ุงูููุงุฐุฌ ุงููุนุงูุฌุฉ ูุณุจููุง ููุชุนุฑู ุนูู ุงูููุงู. ูู [ุงููุญุฏุฉ 2](../chapter2/asr_pipeline)ุ ูุฏููุง ุงูุฏุงูุฉ `pipeline()` ูุทุฑููุฉ ุณููุฉ ูุชุดุบูู ููุงู ุงูุชุนุฑู ุนูู ุงูููุงูุ ูุน ุงูุชุนุงูู ูุน ุฌููุน ุนูููุงุช ุงููุนุงูุฌุฉ ุงููุณุจูุฉ ูุงููุงุญูุฉ ุชุญุช ุงูุบุทุงุกุ ูุชูููุฑ ุงููุฑููุฉ ูุชุฌุฑุจุฉ ุฃู ููุทุฉ ุชูุชูุด ูุนุงูุฌุฉ ูุณุจููุง ุนูู Hugging Face Hub ุจุณุฑุนุฉ. ูู ูุฐู ุงููุญุฏุฉุ ุณูุบูุต ูู ูุณุชูู ุฃุนูู ููุณุชูุดู ุงูุฎุตุงุฆุต ุงููุฎุชููุฉ ูููุงุฐุฌ ุงูุชุนุฑู ุนูู ุงูููุงู ูููููุฉ ุงุณุชุฎุฏุงููุง ููุนุงูุฌุฉ ูุฌููุนุฉ ูุชููุนุฉ ูู ุงูููุงู ุงููุฎุชููุฉ. 

ููุง ูู ููุตู ูู ุงููุญุฏุฉ 3ุ ุชููุณู ููุงุฐุฌ ุงูุชุนุฑู ุนูู ุงูููุงู ุจุดูู ุนุงู ุฅูู ุฅุญุฏู ุงููุฆุชูู ุงูุชุงููุชูู: 

1. ุชุตููู ุชุณูุณู ุงูููุช ุงูุงุชุตุงูู (CTC): ููุงุฐุฌ _encoder-only_ ูุน ุฑุฃุณ ุชุตููู ุฎุทู (CTC) ูู ุงูุฃุนูู. 
2. ุงูุชุณูุณู ุฅูู ุชุณูุณู (Seq2Seq): ููุงุฐุฌ _encoder-decoder_ุ ูุน ุขููุฉ ุงูุชุจุงู ูุชูุงุทุน ุจูู ุงููุดูุฑ ููู ุงูุชุดููุฑ. 

ูุจู ุนุงู 2022ุ ูุงู CTC ุฃูุซุฑ ุดุนุจูุฉ ุจูู ุงูุจููุชููุ ุญูุซ ุญููุช ููุงุฐุฌ ุงููุดูุฑ ููุท ูุซู Wav2Vec2 ูHuBERT ูXLSR ุฅูุฌุงุฒุงุช ูู ูููุฐุฌ ุงููุนุงูุฌุฉ ุงููุณุจูุฉ/ุงูุชูููุญ ููููุฐุฌ ุงูููุงู. ููุงูุช ุดุฑูุงุช ูุจุฑูุ ูุซู Meta ูMicrosoftุ ุจูุนุงูุฌุฉ ุงููุดูุฑ ูุณุจููุง ุนูู ูููุงุช ูุงุฆูุฉ ูู ุจูุงูุงุช ุงูุตูุช ุบูุฑ ุงูููุณููุฉ ููุฏุฉ ุฃูุงู ุฃู ุฃุณุงุจูุน. ุจุนุฏ ุฐููุ ูููู ูููุณุชุฎุฏููู ุฃุฎุฐ ููุทุฉ ุชูุชูุด ูุนุงูุฌุฉ ูุณุจููุง ูุชูููุญูุง ุจุงุณุชุฎุฏุงู ุฑุฃุณ CTC ุนูู ูุง ูุง ูุฒูุฏ ุนู **10 ุฏูุงุฆู** ูู ุจูุงูุงุช ุงูููุงู ุงูููุณููุฉ ูุชุญููู ุฃุฏุงุก ููู ูู ูููุฉ ุงูุชุนุฑู ุนูู ุงูููุงู ุงููุงุญูุฉ. 

ููุน ุฐููุ ูุฅู ูููุงุฐุฌ CTC ุฃูุฌู ูุตูุฑ. ูุคุฏู ุฅูุญุงู ุทุจูุฉ ุฎุทูุฉ ุจุณูุทุฉ ุจูุดูุฑ ุฅูู ุงูุญุตูู ุนูู ูููุฐุฌ ุฅุฌูุงูู ุตุบูุฑ ูุณุฑูุนุ ููููู ูุฏ ูููู ุนุฑุถุฉ ูุฃุฎุทุงุก ุงูุชูุฌุฆุฉ ุงูุตูุชูุฉ. ุณูููู ุจุชูุถูุญ ุฐูู ููููุฐุฌ Wav2Vec2 ุฃุฏูุงู. 

## ูุญุต ููุงุฐุฌ CTC 

ุฏุนููุง ูุญูู ููุชุทููุง ุตุบูุฑูุง ูู ูุฌููุนุฉ ุจูุงูุงุช [LibriSpeech ASR](hf-internal-testing/librispeech_asr_dummy) ูุชูุถูุญ ูุฏุฑุงุช Wav2Vec2 ุนูู ูุณุฎ ุงูููุงู: 

```python
from datasets import load_dataset

dataset = load_dataset(
"hf-internal-testing/librispeech_asr_dummy", "clean", split="validation"
)
dataset
``` 

**ุงููุชูุฌุฉ:** 

```
Dataset({
features: ['file', 'audio', 'text', 'speaker_id', 'chapter_id', 'id'],
num_rows: 73
})
``` 

ูููููุง ุงุฎุชูุงุฑ ูุงุญุฏุฉ ูู ุนููุงุช ุงูุตูุช ุงูู 73 ููุญุต ุนููุฉ ุงูุตูุช ุจุงูุฅุถุงูุฉ ุฅูู ุงููุณุฎ: 

```python
from IPython.display import Audio

sample = dataset[2]

print(sample["text"])
Audio(sample["audio"]["array"], rate=sample["audio"]["sampling_rate"])
``` 

**ุงููุชูุฌุฉ:** 

```
HE TELLS US THAT AT THIS FESTIVE SEASON OF THE YEAR WITH CHRISTMAS AND ROAST BEEF LOOMING BEFORE US SIMILES DRAWN FROM EATING AND ITS RESULTS OCCUR MOST READILY TO THE MIND
``` 

ุฑุงุฆุน! ุนูุฏ ุงููููุงุฏ ููุญู ุงูุจูุฑ ุงููุดููุ ูุจุฏู ุฑุงุฆุนูุง! ๐ ุจุนุฏ ุงุฎุชูุงุฑ ุนููุฉ ุงูุจูุงูุงุชุ ุณูููู ุงูุขู ุจุชุญููู ููุทุฉ ุชูุชูุด ูููุญุฉ ูู ุงูุฏุงูุฉ `pipeline()`. ููููุงู ุจุฐููุ ุณูุณุชุฎุฏู ููุทุฉ ุงูุชูุชูุด ุงูุฑุณููุฉ [Wav2Vec2 base](facebook/wav2vec2-base-100h) ุงููููุญุฉ ุนูู 100 ุณุงุนุฉ ูู ุจูุงูุงุช LibriSpeech: 

```python
from transformers import pipeline

pipe = pipeline("automatic-speech-recognition", model="facebook/wav2vec2-base-100h")
``` 

ุจุนุฏ ุฐููุ ุณูุฃุฎุฐ ูุซุงููุง ูู ูุฌููุนุฉ ุงูุจูุงูุงุช ูููุฑุฑ ุจูุงูุงุชู ุงูุฎุงู ุฅูู ุงูุฏุงูุฉ pipeline. ูุธุฑูุง ูุฃู ุงูุฏุงูุฉ `pipeline` *ุชุณุชููู* ุฃู ูุงููุณ ููุฑุฑู ุฅูููุง (ููุง ูุนูู ุฃูู ูุง ูููู ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงูู)ุ ูุณููุฑุฑ ูุณุฎุฉ ูู ุงูุจูุงูุงุช. ุจูุฐู ุงูุทุฑููุฉุ ูููููุง ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ุนููุฉ ุงูุตูุช ููุณูุง ูู ุงูุฃูุซูุฉ ุงูุชุงููุฉ ุจุฃูุงู: 

```python
pipe(sample["audio"].copy())
``` 

**ุงููุชูุฌุฉ:** 

```
{"text": "HE TELLS US THAT AT THIS FESTIVE SEASON OF THE YEAR WITH CHRISTMAUS AND ROSE BEEF LOOMING BEFORE US SIMALYIS DRAWN FROM EATING AND ITS RESULTS OCCUR MOST READILY TO THE MIND"}
``` 

ูููููุง ุฃู ูุฑู ุฃู ูููุฐุฌ Wav2Vec2 ูููู ุจุนูู ุฌูุฏ ุฌุฏูุง ูู ูุณุฎ ูุฐู ุงูุนููุฉ - ูููููุฉ ุงูุฃูููุ ูุจุฏู ุตุญูุญูุง ุจุดูู ุนุงู. 

ุฏุนููุง ูุถุน ุงููุฏู ูุงูุชูุจุค ุฌูุจูุง ุฅูู ุฌูุจ ููุจุฑุฒ ุงูุงุฎุชูุงูุงุช: 

```
Target:      HE TELLS US THAT AT THIS FESTIVE SEASON OF THE YEAR WITH CHRISTMAS AND ROAST BEEF LOOMING BEFORE US SIMILES DRAWN FROM EATING AND ITS RESULTS OCCUR MOST READILY TO THE MIND
Prediction:  HE TELLS US THAT AT THIS FESTIVE SEASON OF THE YEAR WITH **CHRISTMAUS** AND **ROSE** BEEF LOOMING BEFORE US **SIMALYIS** DRAWN FROM EATING AND ITS RESULTS OCCUR MOST READILY TO THE MIND
``` 

ุนูุฏ ููุงุฑูุฉ ุงููุต ุงููุณุชูุฏู ุจูุต ุงููุณุฎ ุงููุชููุนุ ูููููุง ุฃู ูุฑู ุฃู ุฌููุน ุงููููุงุช _ุตุญูุญุฉ ุตูุชููุง_ุ ูููู ุจุนุถูุง ุบูุฑ ููุชูุจ ุจุดูู ุฏููู. ุนูู ุณุจูู ุงููุซุงู: 

* _CHRISTMAUS_ ููุงุจู _CHRISTMAS_
* _ROSE_ ููุงุจู _ROAST_
* _SIMALYIS_ ููุงุจู _SIMILES_ 

ูุฐุง ูุณูุท ุงูุถูุก ุนูู ูุตูุฑ ูููุฐุฌ CTC. ุฅู ูููุฐุฌ CTC ูู ูู ุงูุฃุณุงุณ ูููุฐุฌ "ุตูุชู ููุท": ููู ูุชููู ูู ูุดูุฑ ูุดูู ุชูุซููุงุช ุงูุญุงูุฉ ุงููุฎููุฉ ูู ุฅุฏุฎุงูุงุช ุงูุตูุชุ ูุทุจูุฉ ุฎุทูุฉ ุชููู ุจุชุนููู ุงูุญุงูุงุช ุงููุฎููุฉ ุฅูู ุฃุญุฑู: 

<!--- ููุฒู ุฏูุฌ U3 ูุจู ุชููุฑ ูุฐุง ุงูุดูู: 
<div class="flex justify-center">
<img src="https://huggingface.co/datasets/huggingface-course/audio-course-images/resolve/main/wav2vec2-ctc.png" alt="ูุญูู ุงููุดูุฑ ูุน ุฑุฃุณ CTC ูู ุงูุฃุนูู">
</div> 
---> 

ูุฐุง ูุนูู ุฃู ุงููุธุงู ูุนุชูุฏ ุจุดูู ุดุจู ูุงูู ูู ุชูุจุคู ุนูู ุงูุฅุฏุฎุงู ุงูุตูุชู ุงูุฐู ุชู ููุญู (ุงูุฃุตูุงุช ุงูุตูุชูุฉ ููุตูุช)ุ ูุจุงูุชุงูู ูููู ุฅูู ูุณุฎ ุงูุตูุช ุจุทุฑููุฉ ุตูุชูุฉ (ูุซู _CHRISTMAUS_). ุฅูู ูุนุทู ุฃูููุฉ ุฃูู ูุณูุงู ููุฐุฌุฉ ุงููุบุฉ ููุญุฑูู ุงูุณุงุจูุฉ ูุงููุงุญูุฉุ ูุจุงูุชุงูู ููู ุนุฑุถุฉ ูุฃุฎุทุงุก ุงูุชูุฌุฆุฉ ุงูุตูุชูุฉ. ููู ุดุฃู ุงููููุฐุฌ ุงูุฃูุซุฑ ุฐูุงุกู ุฃู ูุญุฏุฏ ุฃู _CHRISTMAUS_ ููุณุช ูููุฉ ุตุญูุญุฉ ูู ุงูููุฑุฏุงุช ุงูุฅูุฌููุฒูุฉุ ูุฃู ูุตุญุญูุง ุฅูู _CHRISTMAS_ ุนูุฏ ุฅุฌุฑุงุก ุชูุจุคุงุชู. ููุง ููุชูุฏ ููุฒุชูู ูุจูุฑุชูู ูู ุชูุจุคูุง - ุญุงูุฉ ุงูุฃุญุฑู ูุนูุงูุงุช ุงูุชุฑููู - ููุง ูุญุฏ ูู ูุงุฆุฏุฉ ูุณุฎ ุงููููุฐุฌ ูู ุงูุชุทุจููุงุช ุงููุงูุนูุฉ.
## ุงูุงูุชูุงู ุฅูู Seq2Seq 

ููุง ูุฃุชู ุฏูุฑ ููุงุฐุฌ Seq2Seq! ููุง ูู ููุถุญ ูู ุงููุญุฏุฉ 3ุ ุชุชููู ููุงุฐุฌ Seq2Seq ูู ูุดูุฑ ููู ุชุดููุฑ ูุฑุชุจุทูู ุนุจุฑ ุขููุฉ ุงูุชูุงู ูุชูุงุทุน. ููุนุจ ุงููุดูุฑ ููุณ ุงูุฏูุฑ ุงูุณุงุจูุ ุญูุซ ูุญุณุจ ุชูุซููุงุช ุงูุญุงูุฉ ุงููุฎููุฉ ูุฅุฏุฎุงูุงุช ุงูุตูุชุ ุจูููุง ููุนุจ ูู ุงูุชุดููุฑ ุฏูุฑ **ูููุฐุฌ ุงููุบุฉ**. ูููู ูู ุงูุชุดููุฑ ุจูุนุงูุฌุฉ ุงูุชุณูุณู ุงููุงูู ูุชูุซููุงุช ุงูุญุงูุฉ ุงููุฎููุฉ ูู ุงููุดูุฑ ูููุดุฆ ุงููุณุฎ ุงููุตูุฉ ุงูููุงุจูุฉ. ูุจูุถู ุงูุณูุงู ุงูุนุงููู ูุฅุฏุฎุงู ุงูุตูุชุ ูุชููู ูู ุงูุชุดููุฑ ูู ุงุณุชุฎุฏุงู ุณูุงู ููุฐุฌุฉ ุงููุบุฉ ุฃุซูุงุก ุฅุฌุฑุงุก ุชูุจุคุงุชูุ ููุง ูุตุญุญ ุฃุฎุทุงุก ุงููุฌุงุก ุฃุซูุงุก ุงูุชููู ูุจุงูุชุงูู ูุชุฌุงูุฒ ูุดููุฉ ุงูุชูุจุคุงุช ุงูุตูุชูุฉ.

ููุงู ุฌุงูุจุงู ุณูุจูุงู ูููุงุฐุฌ Seq2Seq:

1. ุจุทูุฆุฉ ุจุทุจูุนุชูุง ูู ูู ุงูุชุดููุฑุ ูุฃู ุนูููุฉ ูู ุงูุชุดููุฑ ุชุญุฏุซ ุฎุทูุฉ ุจุฎุทูุฉุ ุจุฏูุงู ูู ุฃู ุชุญุฏุซ ุฌููุนูุง ูุฑุฉ ูุงุญุฏุฉ.
2. ุฃูุซุฑ ุฌูุนุง ููุจูุงูุงุชุ ููุง ูุชุทูุจ ูุฏุฑูุง ุฃูุจุฑ ุจูุซูุฑ ูู ุจูุงูุงุช ุงูุชุฏุฑูุจ ูููุตูู ุฅูู ุงูุชูุงุฑุจ.

ุนูู ูุฌู ุงูุฎุตูุตุ ูุงูุช ุงูุญุงุฌุฉ ุฅูู ูููุงุช ูุจูุฑุฉ ูู ุจูุงูุงุช ุงูุชุฏุฑูุจ ุนูู ุฒุฌุงุฌุฉ ูู ุชูุฏู ููุฏุณุงุช Seq2Seq ููููุงู. ูู ุงูุตุนุจ ุงูุญุตูู ุนูู ุจูุงูุงุช ุงูููุงู ุงูููุณููุฉุ ุญูุซ ุชุญุชูู ุฃูุจุฑ ูุฌููุนุงุช ุงูุจูุงูุงุช ุงูููุณููุฉ ูู ุฐูู ุงูููุช ุนูู 10000 ุณุงุนุฉ ููุท. ููุฏ ุชุบูุฑ ูู ุฐูู ูู ุนุงู 2022 ูุน ุฅุตุฏุงุฑ **Whisper**. Whisper ูู ูููุฐุฌ ููุฏุฑุจ ูุณุจููุง ููุชุนุฑู ุนูู ุงูููุงู ููุดุฑ ูู [ุณุจุชูุจุฑ 2022](https://openai.com/blog/whisper/) ุจูุงุณุทุฉ Alec Radford et al. ูู OpenAI. ุนูู ุนูุณ ุฃุณูุงููุง CTCุ ูุงูุชู ุชู ุชุฏุฑูุจูุง ูุณุจููุง ุจุงููุงูู ุนูู ุจูุงูุงุช ุตูุชูุฉ **ุบูุฑ ููุณููุฉ**ุ ุชู ุชุฏุฑูุจ Whisper ูุณุจููุง ุนูู ูููุฉ ูุงุฆูุฉ ูู ุจูุงูุงุช ุงูุตูุช ูุงููุต **ุงูููุณููุฉ**ุ 680000 ุณุงุนุฉ ุนูู ูุฌู ุงูุฏูุฉ.

ูุฐุง ุฃูุจุฑ ุจููุฏุงุฑ ุนุดุฑุฉ ุฃุถุนุงู ูู ุงูุจูุงูุงุช ุบูุฑ ุงูููุณููุฉ ุงููุณุชุฎุฏูุฉ ูุชุฏุฑูุจ Wav2Vec 2.0 (60000 ุณุงุนุฉ). ูุงูุฃูุซุฑ ูู ุฐููุ ุฃู 117000 ุณุงุนุฉ ูู ุจูุงูุงุช ุงูุชุฏุฑูุจ ุงููุณุจู ูุฐู ูุชุนุฏุฏุฉ ุงููุบุงุช (ุฃู "ุบูุฑ ุงูุฅูุฌููุฒูุฉ"). ูุคุฏู ูุฐุง ุฅูู ููุงุท ุชูุชูุด ูููู ุชุทุจูููุง ุนูู ุฃูุซุฑ ูู 96 ูุบุฉุ ููุนุชุจุฑ ุงููุซูุฑ ูููุง ููุฎูุถ ุงูููุงุฑุฏุ ููุง ูุนูู ุฃู ุงููุบุฉ ุชูุชูุฑ ุฅูู ูุฌููุนุฉ ูุจูุฑุฉ ูู ุงูุจูุงูุงุช ุงูููุงุณุจุฉ ููุชุฏุฑูุจ.

ุนูุฏ ุชูุณูุน ูุทุงููุง ุฅูู 680000 ุณุงุนุฉ ูู ุจูุงูุงุช ุงูุชุฏุฑูุจ ุงููุณุจู ุงูููุณููุฉุ ุฃุธูุฑุช ููุงุฐุฌ Whisper ูุฏุฑุฉ ูููุฉ ุนูู ุงูุชุนููู ุนูู ุงูุนุฏูุฏ ูู ูุฌููุนุงุช ุงูุจูุงูุงุช ููุฌุงูุงุชูุง. ุชุญูู ููุงุท ุงูุชูุชูุด ุงูููุฏุฑุจุฉ ูุณุจููุง ูุชุงุฆุฌ ุชูุงูุณูุฉ ูุฃูุธูุฉ ุงูุฃูุงุจูุจ ุงููุชูุฏูุฉุ ูุน ูุนุฏู ุฎุทุฃ ูู ุงููููุงุช ูุจูุบ ุญูุงูู 3% (WER) ุนูู ุงููุฌููุนุฉ ุงููุฑุนูุฉ test-clean ูู LibriSpeech pipe ููุชูุฌุฉ ุฌุฏูุฏุฉ ูุชููุฒุฉ ุนูู TED-LIUM ุจูุนุฏู ุฎุทุฃ ูู ุงููููุงุช ูุจูุบ 4.7% (ุฑุงุฌุน ุงูุฌุฏูู 8 ูู [ูุฑูุฉ Whisper](https://cdn.openai.com/papers/whisper.pdf)).

ุงูุฃูู ูู ุฐูู ูู ูุฏุฑุฉ Whisper ุนูู ุงูุชุนุงูู ูุน ุนููุงุช ุงูุตูุช ุทูููุฉ ุงูุดููุ ููุชุงูุชูุง ุถุฏ ุถูุถุงุก ุงูุฅุฏุฎุงู ููุฏุฑุชูุง ุนูู ุงูุชูุจุค ุจุงููุณุฎ ุงููุตูุฉ ุจุญุฑูู ูุจูุฑุฉ ูุนูุงูุงุช ุชุฑููู. ูุฐุง ูุฌุนููุง ูุฑุดุญูุง ูุงุจููุง ููุชุทุจูู ูุฃูุธูุฉ ุงูุชุนุฑู ุนูู ุงูููุงู ูู ุงูุนุงูู ุงูุญูููู.

ุณูุจูู ูู ุงูุฌุฒุก ุงููุชุจูู ูู ูุฐุง ุงููุณู ููููุฉ ุงุณุชุฎุฏุงู ููุงุฐุฌ Whisper ุงูููุฏุฑุจุฉ ูุณุจููุง ููุชุนุฑู ุนูู ุงูููุงู ุจุงุณุชุฎุฏุงู ๐ค Transformers. ูู ุงูุนุฏูุฏ ูู ุงูุญุงูุงุชุ ุชููู ููุงุท ุชูุชูุด Whisper ุงูููุฏุฑุจุฉ ูุณุจููุง ูุนุงูุฉ ููุบุงูุฉ ูุชุนุทู ูุชุงุฆุฌ ุฑุงุฆุนุฉุ ูุฐูู ูุดุฌุนู ุนูู ุชุฌุฑุจุฉ ุงุณุชุฎุฏุงู ููุงุท ุงูุชูุชูุด ุงูููุฏุฑุจุฉ ูุณุจููุง ูุฎุทูุฉ ุฃููู ูุญู ุฃู ูุดููุฉ ูู ุงูุชุนุฑู ุนูู ุงูููุงู. ูู ุฎูุงู ุงูุถุจุท ุงูุฏูููุ ูููู ุชูููู ููุงุท ุงูุชูุชูุด ุงูููุฏุฑุจุฉ ูุณุจููุง ููุฌููุนุงุช ุจูุงูุงุช ููุบุงุช ูุญุฏุฏุฉ ูุชุญุณูู ูุฐู ุงููุชุงุฆุฌ. ุณูููู ุจุงูุชูุถูุญ ููููุฉ ุงูููุงู ุจุฐูู ูู ุงููุณู ุงููุฑุนู ุงููุงุฏู ุญูู [ุงูุถุจุท ุงูุฏููู](fine-tuning).

ุชุฃุชู ููุงุท ุชูุชูุด Whisper ุจุฎูุณ ุชููููุงุช ุจุฃุญุฌุงู ููุงุฐุฌ ูุฎุชููุฉ. ุชู ุชุฏุฑูุจ ุงูุฃุฑุจุนุฉ ุงูุฃุตุบุฑ ุญุฌููุง ุนูู ุจูุงูุงุช ุจุงููุบุฉ ุงูุฅูุฌููุฒูุฉ ููุท ุฃู ูุชุนุฏุฏุฉ ุงููุบุงุช. ุฃูุจุฑ ููุทุฉ ุชูุชูุด ูุชุนุฏุฏุฉ ุงููุบุงุช ููุท. ูู ููุงุท ุงูุชูุชูุด ุงูุชุณุนุฉ ุงูููุฏุฑุจุฉ ูุณุจููุง ูุชุงุญุฉ ุนูู [Hugging Face Hub](https://huggingface.co/models?search=openai/whisper). ูุชู ุชูุฎูุต ููุงุท ุงูุชูุชูุด ูู ุงูุฌุฏูู ุงูุชุงูู ูุน ุฑูุงุจุท ุฅูู ุงูููุงุฐุฌ ุนูู Hub. ูุดูุฑ "VRAM" ุฅูู ุฐุงูุฑุฉ GPU ุงููุทููุจุฉ ูุชุดุบูู ุงููููุฐุฌ ุจุญุฌู ุงูุฏููุนุฉ ุงูุฃุฏูู 1. "Rel Speed" ูู ุงูุณุฑุนุฉ ุงููุณุจูุฉ ูููุทุฉ ุชูุชูุด ููุงุฑูุฉ ุจุงููููุฐุฌ ุงูุฃูุจุฑ. ุจูุงุกู ุนูู ูุฐู ุงููุนูููุงุชุ ููููู ุงุฎุชูุงุฑ ููุทุฉ ุชูุชูุด ุงูุฃูุณุจ ูุฃุฌูุฒุชู.

| ุงูุญุฌู   | ุงููุนููุงุช | VRAM / ุฌูุฌุงุจุงูุช | ุงูุณุฑุนุฉ ุงููุณุจูุฉ | ุงูุฅูุฌููุฒูุฉ ููุท                                         | ูุชุนุฏุฏ ุงููุบุงุช                                        |
|--------|------------|-----------|-----------|------------------------------------------------------|-----------------------------------------------------|
| tiny   | 39 ู       | 1.4       | 32        | [โ](https://huggingface.co/openai/whisper-tiny.en)   | [โ](https://huggingface.co/openai/whisper-tiny)     |
| base   | 74 ู       | 1.5       | 16        | [โ](https://huggingface.co/openai/whisper-base.en)   | [โ](https://huggingface.co/openai/whisper-base)     |
| small  | 244 ู      | 2.3       | 6         | [โ](https://huggingface.co/openai/whisper-small.en)  | [โ](https://huggingface.co/openai/whisper-small)    |
| medium | 769 ู      | 4.2       | 2         | [โ](https://huggingface.co/openai/whisper-medium.en) | [โ](https://huggingface.co/openai/whisper-medium)   |
| large  | 1550 ู     | 7.5       | 1         | x                                                    | [โ](https://huggingface.co/openai/whisper-large-v2) |

ุฏุนููุง ูุญูู ููุทุฉ ุชูุชูุด [Whisper Base](https://huggingface.co/openai/whisper-base)ุ ูุงูุชู ุจุญุฌู ููุงุซู ูููุทุฉ ุชูุชูุด Wav2Vec2 ุงูุชู ุงุณุชุฎุฏููุงูุง ุณุงุจููุง. ุชููุนูุง ูุงูุชูุงููุง ุฅูู ุงูุชุนุฑู ุนูู ุงูููุงู ูุชุนุฏุฏ ุงููุบุงุชุ ุณูููู ุจุชุญููู ุงููุชุบูุฑ ูุชุนุฏุฏ ุงููุบุงุช ูู ููุทุฉ ุชูุชูุด base. ุณูููู ุฃูุถูุง ุจุชุญููู ุงููููุฐุฌ ุนูู GPU ุฅุฐุง ูุงู ูุชุงุญูุงุ ุฃู ุนูู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ (CPU) ูู ุญุงู ุนุฏู ุชููุฑู. ุจุนุฏ ุฐููุ ุณุชุชููู ุงูุฏุงูุฉ `pipeline()` ูููุฉ ููู ุฌููุน ุงููุฏุฎูุงุช / ุงููุฎุฑุฌุงุช ูู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุฅูู GPU ุญุณุจ ุงูุญุงุฌุฉ:

```python
import torch
from transformers import pipeline

device = "cuda:0" if torch.cuda.is_available() else "cpu"
pipe = pipeline(
"automatic-speech-recognition", model="openai/whisper-base", device=device
)
```

ุฑุงุฆุน! ุงูุขู ุฏุนููุง ูููู ุจูุณุฎ ุงููุต ุงูุตูุชู ููุง ูุนููุง ูู ูุจู. ุงูุชุบููุฑ ุงููุญูุฏ ุงูุฐู ูุฌุฑูู ูู ุชูุฑูุฑ ุญุฌุฉ ุฅุถุงููุฉุ `max_new_tokens`ุ ูุงูุชู ุชุฎุจุฑ ุงููููุฐุฌ ุจุงูุนุฏุฏ ุงูุฃูุตู ูู ุงูุฑููุฒ ุงููุฑุงุฏ ุฅูุดุงุคูุง ุนูุฏ ุฅุฌุฑุงุก ุงูุชูุจุค:

```python
pipe(sample["audio"], max_new_tokens=256)
```

**ุงูุฅุฎุฑุงุฌ:**

```
{'text': ' He tells us that at this festive season of the year, with Christmas and roast beef looming before us, similarly is drawn from eating and its results occur most readily to the mind.'}
```

ูู ุงูุณูู ุจูุง ููู ุงูููุงูุฉ! ุฃูู ูุง ุณุชูุงุญุธู ูู ูุฌูุฏ ุงูุญุฑูู ุงููุจูุฑุฉ ูุนูุงูุงุช ุงูุชุฑููู. ุนูู ุงูููุฑุ ูุฌุนู ูุฐุง ุงููุณุฎ ุงููุตู ุฃุณูู ูู ุงููุฑุงุกุฉ ููุงุฑูุฉ ุจุงููุณุฎ ุงููุตู ุบูุฑ ุงูููุณูุฎ ูุบูุฑ ุงูููููุท ูู Wav2Vec2. ุฏุนููุง ูุถุน ุงููุณุฎ ุงููุตู ุฌูุจูุง ุฅูู ุฌูุจ ูุน ุงููุฏู:

```
ุงููุฏู: HE TELLS US THAT AT THIS FESTIVE SEASON OF THE YEAR WITH CHRISTMAS AND ROAST BEEF LOOMING BEFORE US SIMILES DRAWN FROM EATING AND ITS RESULTS OCCUR MOST READILY TO THE MIND
ุงูุชููุน: He tells us that at this festive season of the year, with **Christmas** and **roast** beef looming before us, **similarly** is drawn from eating and its results occur most readily to the mind.
```

ูุงู Whisper ุจุนูู ุฑุงุฆุน ูู ุชุตุญูุญ ุงูุฃุฎุทุงุก ุงูุตูุชูุฉ ุงูุชู ุฑุฃููุงูุง ูู Wav2Vec2 - ูู ูู _Christmas_ ู _roast_ ููุชูุจุฉ ุจุดูู ุตุญูุญ. ููุงุญุธ ุฃู ุงููููุฐุฌ ูุง ูุฒุงู ููุงูุญ ูุน _SIMILES_ุ ุญูุซ ุชูุช ูุชุงุจุชู ุจุดูู ุบูุฑ ุตุญูุญ ุนูู ุฃูู _similarly_ุ ูููู ูุฐู ุงููุฑุฉ ูููู ุงูุชูุจุค ูููุฉ ุตุญูุญุฉ ูู ุงูููุฑุฏุงุช ุงูุฅูุฌููุฒูุฉ. ูููู ุฃู ูุณุงุนุฏ ุงุณุชุฎุฏุงู ููุทุฉ ุชูุชูุด Whisper ุงูุฃูุจุฑ ุญุฌููุง ูู ุฒูุงุฏุฉ ุชูููู ุฃุฎุทุงุก ุงููุณุฎ ุงููุตูุ ุนูู ุญุณุงุจ ุงูุญูุณุจุฉ ุงูุฃูุจุฑ ูููุช ุงููุณุฎ ุงููุตู ุงูุฃุทูู.

ููุฏ ููุนุฏูุง ุจูููุฐุฌ ููููู ุงูุชุนุงูู ูุน 96 ูุบุฉุ ูุฐูู ุฏุนููุง ูุชุฑู ุงูุชุนุฑู ุนูู ุงูููุงู ุจุงููุบุฉ ุงูุฅูุฌููุฒูุฉ ุงูุขู ููุฐูุจ ุนุงููููุง ๐!

ุชุนุฏ ูุฌููุนุฉ ุจูุงูุงุช [Multilingual LibriSpeech](https://huggingface.co/datasets/facebook/multilingual_librispeech) (MLS) ุงูููุงูุฆ ูุชุนุฏุฏ ุงููุบุงุช ููุฌููุนุฉ ุจูุงูุงุช LibriSpeechุ ุญูุซ ุชุญุชูู ุนูู ุจูุงูุงุช ุตูุชูุฉ ููุณููุฉ ุจุณุช ูุบุงุช. ุณูููู ุจุชุญููู ุนููุฉ ูุงุญุฏุฉ ูู ุงูุชูุณูู ุงูุฅุณุจุงูู ููุฌููุนุฉ ุจูุงูุงุช MLSุ ูุณุชููุฏูู ูู ูุถุน _streaming_ ุจุญูุซ ูุง ูุชุนูู ุนูููุง ุชูุฒูู ูุฌููุนุฉ ุงูุจูุงูุงุช ุจุฃููููุง:

```python
dataset = load_dataset(
"facebook/multilingual_librispeech", "spanish", split="validation", streaming=True
)
sample = next(iter(dataset))
```

ูุฑุฉ ุฃุฎุฑูุ ุณูููู ุจูุญุต ุงููุณุฎ ุงููุตู ุงููุตู ูุงูุงุณุชูุงุน ุฅูู ุงูุฌุฒุก ุงูุตูุชู:

```python
print(sample["text"])
Audio(sample["audio"]["array"], rate=sample["audio"]["sampling_rate"])
```

**ุงูุฅุฎุฑุงุฌ:**

```
entonces te delelitarรกs en jehovรก y yo te harรฉ subir sobre las alturas de la tierra y te darรฉ รก comer la heredad de jacob tu padre porque la boca de jehovรก lo ha hablado
```

ูุฐุง ูู ุงููุต ุงููุณุชูุฏู ุงูุฐู ููุฏู ุฅููู ุจูุณุฎ Whisper ุงููุตู. ุนูู ุงูุฑุบู ูู ุฃููุง ูุนุฑู ุงูุขู ุฃูู ูููููุง ุนูู ุงูุฃุฑุฌุญ ุงูููุงู ุจุฐูู ุจุดูู ุฃูุถูุ ุญูุซ ุณูููู ูููุฐุฌูุง ุฃูุถูุง ุจุงูุชูุจุค ุจุนูุงูุงุช ุงูุชุฑููู ูุงูุญุฑูู ุงููุจูุฑุฉุ ูุงูุชู ูุง ุชูุฌุฏ ูู ุงููุฑุฌุน. ุฏุนููุง ูููู ุจุฅุฑุณุงู ุงูุนููุฉ ุงูุตูุชูุฉ ุฅูู ุฎุท ุงูุฃูุงุจูุจ ููุญุตูู ุนูู ุงูุชูุจุค ุงููุตู. ุฃุญุฏ ุงูุฃุดูุงุก ุงูุชู ูุฌุจ ููุงุญุธุชูุง ูู ุฃู ุฎุท ุงูุฃูุงุจูุจ _ูุณุชููู_ ูุงููุณ ุฅุฏุฎุงูุงุช ุงูุตูุช ุงูุฐู ุฃุฏุฎููุงูุ ููุง ูุนูู ุฃูู ูุง ูููู ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ุงููุงููุณ. ููุงูุชูุงู ุญูู ูุฐุงุ ุณููุฑุฑ _ูุณุฎุฉ_ ูู ุงูุนููุฉ ุงูุตูุชูุฉุ ุจุญูุซ ูููููุง ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ููุณ ุงูุนููุฉ ุงูุตูุชูุฉ ูู ุฃูุซูุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุชุงููุฉ:

```python
pipe(sample["audio"].copy(), max_new_tokens=256, generate_kwargs={"task": "transcribe"})
```

**ุงูุฅุฎุฑุงุฌ:**

```
{'text': ' Entonces te deleitarรกs en Jehovรก y yo te harรฉ subir sobre las alturas de la tierra y te darรฉ a comer la heredad de Jacob tu padre porque la boca de Jehovรก lo ha hablado.'}
```

ุฑุงุฆุน - ูุฐุง ูุดุจู ุฅูู ุญุฏ ูุจูุฑ ูุตูุง ุงููุฑุฌุนู (ุฑุจูุง ุฃูุถู ูุฃูู ูุญุชูู ุนูู ุนูุงูุงุช ุชุฑููู ูุญุฑูู ูุจูุฑุฉ!). ุณุชูุงุญุธ ุฃููุง ูููุง ุจุฅุฑุณุงู `"task"` ูุญุฌุฉ ูููุฉ ูุฑูุฑ ูููุฏ (generate kwarg). ูุคุฏู ุชุนููู `"task"` ุฅูู `"transcribe"` ุฅูู ุฅุฌุจุงุฑ Whisper ุนูู ุฃุฏุงุก ูููุฉ _ุงูุชุนุฑู ุนูู ุงูููุงู_ุ ุญูุซ ุชุชู ูุชุงุจุฉ ุงูุตูุช ุจุงููุบุฉ ููุณูุง ุงูุชู ุชู ุงูุชุญุฏุซ ุจูุง. Whisper ูุงุฏุฑ ุฃูุถูุง ุนูู ุฃุฏุงุก ุงููููุฉ ุฐุงุช ุงูุตูุฉ ุงููุชูุซูุฉ ูู _ุชุฑุฌูุฉ ุงูููุงู_ุ ุญูุซ ูููู ุชุฑุฌูุฉ ุงูุตูุช ุจุงููุบุฉ ุงูุฅุณุจุงููุฉ ุฅูู ูุต ุจุงููุบุฉ ุงูุฅูุฌููุฒูุฉ. ููููุงู ุจุฐููุ ูููู ุจุชุนููู `"task"` ุฅูู `"translate"`:

```python
pipe(sample["audio"], max_new_tokens=256, generate_kwargs={"task": "translate"})
```

**ุงูุฅุฎุฑุงุฌ:**

```
{'text': ' So you will choose in Jehovah and I will raise you on the heights of the earth and I will give you the honor of Jacob to your father because the voice of Jehovah has spoken to you.'}
```

ุงูุขู ุจุนุฏ ุฃู ุนุฑููุง ุฃูู ูููููุง ุงูุชุจุฏูู ุจูู ุงูุชุนุฑู ุนูู ุงูููุงู ูุชุฑุฌูุฉ ุงูููุงูุ ูููููุง ุงุฎุชูุงุฑ ูููุชูุง ููููุง ูุงุญุชูุงุฌุงุชูุง. ุฅูุง ุฃู ูููู ุจุงูุชุนุฑู ุนูู ุงูููุงู ูู ุงููุบุฉ X ุฅูู ูุต ุจุงููุบุฉ X (ุนูู ุณุจูู ุงููุซุงูุ ุงูุตูุช ุงูุฅุณุจุงูู ุฅูู ูุต ุฅุณุจุงูู)ุ ุฃู ูููู ุจุชุฑุฌูุฉ ุงูุตูุช ูู ุฃู ูุบุฉ X ุฅูู ูุต ุจุงููุบุฉ ุงูุฅูุฌููุฒูุฉ (ุนูู ุณุจูู ุงููุซุงูุ ุงูุตูุช ุงูุฅุณุจุงูู ุฅูู ูุต ุจุงููุบุฉ ุงูุฅูุฌููุฒูุฉ).

ููุนุฑูุฉ ุงููุฒูุฏ ุญูู ููููุฉ ุงุณุชุฎุฏุงู ุญุฌุฉ `"task"` ููุชุญูู ูู ุฎุตุงุฆุต ุงููุต ุงููููุฏุ ุฑุงุฌุน [ุจุทุงูุฉ ุงููููุฐุฌ](https://huggingface.co/openai/whisper-base#usage) ููููุฐุฌ Whisper base.
## ุงูุชุฑุฌูุฉ: 

## ุงููุณุฎ ุงููุตู ุงูุทููู ูุงูุทูุงุจุน ุงูุฒูููุฉ

ุฑูุฒูุง ุญุชู ุงูุขู ุนูู ูุณุฎ ุนููุงุช ุตูุชูุฉ ูุตูุฑุฉ ุชูู ูุฏุชูุง ุนู 30 ุซุงููุฉ. ูุฐูุฑูุง ุฃู ุฅุญุฏู ูุฒุงูุง Whisper ูู ูุฏุฑุชูุง ุนูู ุงูุนูู ุนูู ุนููุงุช ุตูุชูุฉ ุทูููุฉ. ูุณูุชูุงูู ูุฐู ุงููููุฉ ููุง!

ุฏุนููุง ูููู ุจุฅูุดุงุก ููู ุตูุชู ุทููู ุนู ุทุฑูู ุฑุจุท ุงูุนููุงุช ุงูุชุณูุณููุฉ ูู ูุฌููุนุฉ ุจูุงูุงุช MLS. ูุธุฑูุง ูุฃู ูุฌููุนุฉ ุจูุงูุงุช MLS ููุธูุฉ ูู ุฎูุงู ุชูุณูู ุชุณุฌููุงุช ุงููุชุจ ุงูุตูุชูุฉ ุงูุทูููุฉ ุฅูู ููุงุทุน ุฃูุตุฑุ ูุฅู ุฑุจุท ุงูุนููุงุช ูู ุฅุญุฏู ุทุฑู ุฅุนุงุฏุฉ ุจูุงุก ููุงุทุน ุงููุชุจ ุงูุตูุชูุฉ ุงูุฃุทูู. ูุจุงูุชุงููุ ูุฌุจ ุฃู ูููู ุงูุตูุช ุงููุงุชุฌ ูุชูุงุณููุง ุนุจุฑ ุงูุนููุฉ ุจุฃููููุง.

ุณูุญุฏุฏ ุทูู ุงูุตูุช ุงููุณุชูุฏู ูุฏููุง ุฅูู 5 ุฏูุงุฆูุ ูุณูุชููู ุนู ุฑุจุท ุงูุนููุงุช ุจูุฌุฑุฏ ูุตูููุง ุฅูู ูุฐู ุงููููุฉ:

```python
import numpy as np

target_length_in_m = 5

# ุชุญููู ูู ุฏูุงุฆู ุฅูู ุซูุงูู (* 60) ุฅูู ุนุฏุฏ ุงูุนููุงุช (* ูุนุฏู ุงูุนููุงุช)
ูุนุฏู_ุงูุนููุงุช = pipe.feature_extractor.sampling_rate
target_length_in_samples = target_length_in_m * 60 * sampling_rate

# ููุฑุฑ ุงูุนูููุฉ ุนูู ูุฌููุนุฉ ุงูุจูุงูุงุช ุงููุชุฏููุฉ ุงูุฎุงุตุฉ ุจูุงุ ููุฑุจุท ุงูุนููุงุช ุญุชู ูุตู ุฅูู ุงููุฏู ุงููุญุฏุฏ
long_audio = []
for sample in dataset:
long_audio.extend(sample["audio"]["array"])
if len(long_audio) > target_length_in_samples:
break

long_audio = np.asarray(long_audio)

# ูุง ูู ุงููุชูุฌุฉุ
ุงูุซูุงูู = len(long_audio) / 16000
ุงูุฏูุงุฆูุ ุงูุซูุงูู = divmod(ุงูุซูุงููุ 60)
print(f"Length of audio sample is {minutes} minutes {seconds:.2f} seconds")
```

**ุงููุชูุฌุฉ:**

```
ูุจูุบ ุทูู ุนููุฉ ุงูุตูุช 5.0 ุฏูุงุฆู ู 17.22 ุซุงููุฉ
```

ุญุณููุง! 5 ุฏูุงุฆู ู 17 ุซุงููุฉ ูู ุงูุตูุช ููุณุฎูุง. ููุงู ูุดููุชุงู ูู ุฅุฑุณุงู ุนููุฉ ุงูุตูุช ุงูุทูููุฉ ูุฐู ูุจุงุดุฑุฉ ุฅูู ุงููููุฐุฌ:

1. Whisper ูุตูู ุจุทุจูุนุชู ููุนูู ูุน ุนููุงุช ูุฏุชูุง 30 ุซุงููุฉ: ูุชู ุฅุถุงูุฉ ุงูุตูุช ุฅูู ุฃู ุดูุก ุฃูุตุฑ ูู 30 ุซุงููุฉ ููุตู ุฅูู 30 ุซุงููุฉุ ููุชู ุงูุชุทุงุน ุฃู ุดูุก ุฃุทูู ูู 30 ุซุงููุฉ ุฅูู 30 ุซุงููุฉ ุนู ุทุฑูู ูุทุน ุงูุตูุช ุงูุฅุถุงููุ ูุฐุง ุฅุฐุง ูุฑุฑูุง ุตูุชูุง ูุจุงุดุฑุฉุ ููู ูุญุตู ุฅูุง ุนูู ุงููุณุฎ ุงููุตู ููุซูุงุซูู ุซุงููุฉ ุงูุฃููู

2. ุชุชูุงุณุจ ุงูุฐุงูุฑุฉ ูู ุดุจูุฉ ุงููุญูู ูุน ุทูู ุงูุชุณูุณู ุงูุชุฑุจูุนู: ูุคุฏู ูุถุงุนูุฉ ุทูู ุงูุฅุฏุฎุงู ุฅูู ุฒูุงุฏุฉ ูุชุทูุจุงุช ุงูุฐุงูุฑุฉ ุฃุฑุจุน ูุฑุงุชุ ูุฐุง ูุฅู ุชูุฑูุฑ ูููุงุช ุตูุชูุฉ ุทูููุฉ ููุบุงูุฉ ูุคุฏู ุญุชููุง ุฅูู ุญุฏูุซ ุฎุทุฃ ูู ุงูุฐุงูุฑุฉ (OOM)

ุชุชู ุนูููุฉ ุงููุณุฎ ุงููุตู ุงูุทูููุฉ ูู ๐ค Transformers ูู ุฎูุงู ุชุฌุฒุฆุฉ ุงูุตูุช ุงููุฏุฎู ุฅูู ููุงุทุน ุฃุตุบุฑ ูุฃุณูู ูู ุงูุฅุฏุงุฑุฉ.

ูููู ููู ููุทุน ุชุฏุงุฎู ุตุบูุฑ ูุน ุงูููุทุน ุงูุณุงุจู. ูุณูุญ ููุง ูุฐุง ุจุงูุฑุจุท ุงูุฏููู ููููุงุทุน ูุฑุฉ ุฃุฎุฑู

ุนูุฏ ุงูุญุฏูุฏุ ุญูุซ ูููููุง ุงูุนุซูุฑ ุนูู ุงูุชุฏุงุฎู ุจูู ุงูููุงุทุน ูุฏูุฌ ุงููุณุฎ ุงููุตูุฉ ููููุง ูุฐูู:

<div class="flex justify-center">
<img src="https://huggingface.co/blog/assets/49_asr_chunking/Striding.png" alt="๐ค ุฎูุงุฑุฒููุฉ ุชุฌุฒุฆุฉ Transformers. ุงููุตุฏุฑ: https://huggingface.co/blog/asr-chunking.">
</div>

ููุฒุฉ ุชุฌุฒุฆุฉ ุงูุนููุงุช ูู ุฃููุง ูุง ูุญุชุงุฌ ุฅูู ูุชูุฌุฉ ุงูุฌุฒุก \\ (i\\) ููุณุฎ ุงูููุทุน ุงูุชุงูู

\\ (i + 1 \\). ูุชู ุฅุฌุฑุงุก ุงูุฑุจุท ุจุนุฏ ูุณุฎ ุฌููุน ุงูููุงุทุน ุนูุฏ ุญุฏูุฏ ุงูููุทุนุ ูุฐูู ูุง ููู

ุชุฑุชูุจ ูุณุฎ ุงูููุงุทุน. ุงูุฎูุงุฑุฒููุฉ **ูุง ุชุญุชูุธ ุจุญุงูุฉ**ุ ูุฐูู ูููููุง ุญุชู ุฅุฌุฑุงุก ุงูููุทุน \\ (i + 1 \\)

ูู ููุณ ุงูููุช ูุซู ุงูููุทุน \\ (i \\)! ูุณูุญ ููุง ูุฐุง "ุจุชุดุบูู" ุงูููุงุทุน ูุชุดุบูููุง ุนุจุฑ ุงููููุฐุฌ ุจุงูุชูุงุฒูุ

ููุง ูููุฑ ุณุฑุนุฉ ุญุณุงุจูุฉ ูุจูุฑุฉ ููุงุฑูุฉ ุจูุณุฎูุง ุจุงูุชุชุงุจุน. ููุฒูุฏ ูู ุงููุนูููุงุช ุญูู ุงูุชุฌุฒุฆุฉ ูู ๐ค Transformersุ

ููููู ุงูุฑุฌูุน ุฅูู ูุฐู [ุงูุชุฏูููุฉ](https://huggingface.co/blog/asr-chunking).

ูุชูุดูุท ุงููุณุฎ ุงููุตู ุงูุทูููุฉุ ูุชุนูู ุนูููุง ุฅุถุงูุฉ ุญุฌุฉ ุฅุถุงููุฉ ูุงุญุฏุฉ ุนูุฏ ุงุณุชุฏุนุงุก ุฎุท ุงูุฃูุงุจูุจ. ูุฐุง ุงูุญุฌุฉุ

`chunk_length_s`ุ ูุชุญูู ูู ุทูู ุงูููุงุทุน ุงููุฌุฒุฃุฉ ุจุงูุซูุงูู. ุจุงููุณุจุฉ ุฅูู Whisperุ ุชููู ุงูููุงุทุน ุงูุชู ูุฏุชูุง 30 ุซุงููุฉ ูุซุงููุฉุ

ูุธุฑูุง ูุฃู ูุฐุง ูุชูุงูู ูุน ุทูู ุงูุฅุฏุฎุงู ุงูุฐู ูุชููุนู Whisper.

ูุชูุดูุท ุงูุฏูุนุงุชุ ููุฒู ุชูุฑูุฑ ุงูุญุฌุฉ `batch_size` ุฅูู ุฎุท ุงูุฃูุงุจูุจ. ูู ุฎูุงู ุงูุฌูุน ุจูู ุงูุฃูุฑููุ ูููููุง ูุณุฎ

ุนููุฉ ุงูุตูุช ุงูุทูููุฉ ุจุงุณุชุฎุฏุงู ุงูุชุฌุฒุฆุฉ ูุงูุฏูุนุงุช ููุง ููู:

```python
pipe(
long_audio,
max_new_tokens=256,
generate_kwargs={"task": "transcribe"},
chunk_length_s=30,
batch_size=8,
)
```

**ุงููุชูุฌุฉ:**

```
{'text': ' Entonces te deleitarรกs en Jehovรก, y yo te harรฉ subir sobre las alturas de la tierra, y te darรฉ a comer la
heredad de Jacob tu padre, porque la boca de Jehovรก lo ha hablado. nosotros curados. Todos nosotros nos descarriamos
como bejas, cada cual se apartรณ por su camino, mas Jehovรก cargรณ en รฉl el pecado de todos nosotros...
```

ูู ูููู ุจุทุจุงุนุฉ ุงูุฅุฎุฑุงุฌ ุจุงููุงูู ููุง ูุฃูู ุทููู ุฌุฏูุง (312 ูููุฉ ูู ุงููุฌููุน)! ุนูู GPU V100 ุจุณุนุฉ 16 ุฌูุฌุงุจุงูุชุ ููููู ุชููุน ุฃู ูุณุชุบุฑู ุงูุณุทุฑ ุฃุนูุงู ุญูุงูู 3.45 ุซุงููุฉุ ููู ุฃูุฑ ุฌูุฏ ูุนููุฉ ุตูุชูุฉ ูุฏุชูุง 317 ุซุงููุฉ. ุนูู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉุ ูู ุงููุชููุน

ุฃู ูุณุชุบุฑู ุงูุฃูุฑ 30 ุซุงููุฉ.

ูููู ูู Whisper ุฃูุถูุง ุงูุชูุจุค ุจุงูุทูุงุจุน ุงูุฒูููุฉ ุนูู ูุณุชูู _segment_ ูุจูุงูุงุช ุงูุตูุช. ุชุดูุฑ ูุฐู ุงูุทูุงุจุน ุงูุฒูููุฉ ุฅูู ููุช ุงูุจุฏุก ูุงูุงูุชูุงุก

ููุชุฑุฉ ูุตูุฑุฉ ูู ุงูุตูุชุ ููู ูููุฏุฉ ุจุดูู ุฎุงุต ูููุงุกูุฉ ุงููุณุฎ ุงููุตู ูุน ุงูุตูุช ุงููุฏุฎู. ูููุชุฑุถ

ุฃููุง ูุฑูุฏ ุชูููุฑ ุชุฑุฌูุงุช ุชูุถูุญูุฉ ูุบููุฉ ูููุฏูู - ูุญุชุงุฌ ุฅูู ูุฐู ุงูุทูุงุจุน ุงูุฒูููุฉ ููุนุฑูุฉ ุงูุฌุฒุก ุงูุฐู ููุชูู ุฅููู ุฌุฒุก ุงููุณุฎ ุงููุตู

ูู ุงูููุฏููุ ูู ุฃุฌู ุนุฑุถ ุงููุณุฎ ุงููุตู ุงูุตุญูุญ ูุฐูู ุงูููุช.

ุชูุดูุท ุงูุชูุจุค ุจุงูุทุงุจุน ุงูุฒููู ุฃูุฑ ุจุณูุทุ ูู ูุง ุนูููุง ูุนูู ูู ุชุนููู ุงูุญุฌุฉ `return_timestamps=True`. ุงูุทูุงุจุน ุงูุฒูููุฉ

ุชุชูุงูู ูุน ูู ูู ุฃุณุงููุจ ุงูุชุฌุฒุฆุฉ ูุงูุฏูุนุงุช ุงูุชู ุงุณุชุฎุฏููุงูุง ุณุงุจููุงุ ูุฐุง ูููููุง ุจุจุณุงุทุฉ ุฅุถุงูุฉ ุญุฌุฉ ุงูุทุงุจุน ุงูุฒููู

ุฅูู ููุงููุฉูุง ุงูุณุงุจูุฉ:

```python
pipe(
long_audio,
max_new_tokens=256,
generate_kwargs={"task": "transcribe"},
chunk_length_s=30,
batch_size=8,
return_timestamps=True,
) ["chunks"]
```

**ุงููุชูุฌุฉ:**

```
[{'timestamp': (0.0, 26.4)ุ
'ุงููุต': ' Entonces te deleitarรกs en Jehovรก, y yo te harรฉ subir sobre las alturas de la tierra, y te darรฉ a comer la heredad de Jacob tu padre, porque la boca de Jehovรก lo ha hablado. nosotros curados. Todos nosotros nos descarriamos como bejas, cada cual se apartรณ por su caminoุ' }ุ
{'timestamp': (26.4ุ 32.48)ุ
'ุงููุต': ' mas Jehovรก cargรณ en รฉl el pecado de todos nosotros. No es que partas tu pan con el'}ุ
{"timestamp": (32.48, 38.4)ุ
'ุงููุต': ' hambriento y a los hombres herrantes metas en casa, que cuando vieres al desnudo lo cubras y no'}ุ
...
```

ููุง ูุญู ุฐุง! ูุฏููุง ูุต ูุชููุน ูุงูุทูุงุจุน ุงูุฒูููุฉ ุงูููุงุจูุฉ.

## ููุฎุต

Whisper ูู ูููุฐุฌ ููู ูุณุจู ุงูุชุฏุฑูุจ ููุชุนุฑู ุนูู ุงูููุงู ูุงูุชุฑุฌูุฉ. ููุงุฑูุฉ ุจู Wav2Vec2ุ ูุชููุฒ ุจุฏูุฉ ูุณุฎ ูุตู ุฃุนููุ ูุน ูุฎุฑุฌุงุช ุชุญุชูู ุนูู ุนูุงูุงุช ุชุฑููู ูุญุฑูู ูุจูุฑุฉ. ูููู ุงุณุชุฎุฏุงูู ููุณุฎ ุงูููุงู ุจุงููุบุฉ ุงูุฅูุฌููุฒูุฉ

ุจุงูุฅุถุงูุฉ ุฅูู 96 ูุบุฉ ุฃุฎุฑูุ ุณูุงุก ูู ุงูููุงุทุน ุงูุตูุชูุฉ ุงููุตูุฑุฉ ุฃู ุงูุฃุทูู ูู ุฎูุงู _chunking_. ุชุฌุนู ูุฐู ุงูุณูุงุช ููู

ูููุฐุฌ ูุงุจู ููุชุทุจูู ููุนุฏูุฏ ูู ููุงู ุงูุชุนุฑู ุนูู ุงูููุงู ูุงูุชุฑุฌูุฉ ุฏูู ุงูุญุงุฌุฉ ุฅูู ุถุจุท ุฏููู. ุชููุฑ ุทุฑููุฉ `pipeline()` ุทุฑููุฉ ุณููุฉ ูุชุดุบูู ุงูุงุณุชุฏูุงู ูู ููุงููุงุช ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ุฐุงุช ุงูุณุทุฑ ุงููุงุญุฏ ูุน ุงูุชุญูู ูู ุงูุชูุจุคุงุช ุงููููุฏุฉ.

ูู ุญูู ุฃู ูููุฐุฌ Whisper ูุนูู ุจุดูู ุฌูุฏ ููุบุงูุฉ ุนูู ุงูุนุฏูุฏ ูู ุงููุบุงุช ุนุงููุฉ ุงูููุงุฑุฏุ ุฅูุง ุฃู ูุฏูู ุฏูุฉ ูุณุฎ ูุชุฑุฌูุฉ ุฃูู

ุนูู ุงููุบุงุช ููุฎูุถุฉ ุงูููุงุฑุฏุ ุฃู ุชูู ุงูุชู ุชุญุชูู ุนูู ุจูุงูุงุช ุชุฏุฑูุจ ุฃูู ูุชุงุญุฉ ุจุณูููุฉ. ููุงู ุฃูุถูุง ุฃุฏุงุก ูุชูุงูุช

ุนุจุฑ ููุฌุงุช ูููุฌุงุช ูุฎุชููุฉ ูู ุจุนุถ ุงููุบุงุชุ ุจูุง ูู ุฐูู ุฏูุฉ ุฃูู ููุชุญุฏุซู ุงูุฌูุณูุงุช ูุงูุฃุนุฑุงู ูุงูุฃุนูุงุฑ ุงููุฎุชููุฉ

ุฃู ูุนุงููุฑ ุฏูููุบุฑุงููุฉ ุฃุฎุฑู (_c.f._ [ูุฑูุฉ Whisper](https://arxiv.org/pdf/2212.04356.pdf)).

ูุชุญุณูู ุงูุฃุฏุงุก ุนูู ุงููุบุงุช ุฃู ุงูููุฌุงุช ุฃู ุงูููุฌุงุช ููุฎูุถุฉ ุงูููุงุฑุฏุ ูููููุง ุฃู ูุฃุฎุฐ ูููุฐุฌ Whisper ุงููุฏุฑุจ ูุณุจููุง ูุงูุชุฏุฑูุจ ุนููู

ุนูู ูุฌููุนุฉ ุจูุงูุงุช ุตุบูุฑุฉ ูู ุงูุจูุงูุงุช ุงููุฎุชุงุฑุฉ ุจุดูู ููุงุณุจุ ูู ุนูููุฉ ุชุณูู _fine-tuning_. ุณูุธูุฑ ุฃูู ุจุงุณุชุฎุฏุงู

ุจูุฏุฑ ูุง ูุตู ุฅูู ุนุดุฑ ุณุงุนุงุช ูู ุงูุจูุงูุงุช ุงูุฅุถุงููุฉุ ูููููุง ุชุญุณูู ุฃุฏุงุก ูููุฐุฌ Whisper ุจุฃูุซุฑ ูู 100% ุนูู ูุบุฉ ููุฎูุถุฉ ุงูููุงุฑุฏ. ูู ุงููุณู ุงูุชุงููุ ุณูุบุทู ุงูุนูููุฉ ูุฑุงุก ุงุฎุชูุงุฑ ูุฌููุนุฉ ุจูุงูุงุช ููุถุจุท ุงูุฏููู.