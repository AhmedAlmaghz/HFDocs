ูู ุฌููุฑูุ ูุณุชุฎุฏู ๐ค Optimum _ุฃุดูุงุก ุงูุชูููู_ ูุชุญุฏูุฏ ุงููุนููุงุช ููุชุญุณูู ุนูู ูุณุฑุนุงุช ูุฎุชููุฉ. ุซู ุชูุณุชุฎุฏู ูุฐู ุงููุงุฆูุงุช ูุชููุฆุฉ _ุงููุญุณูุงุช_ ู_ุงููุญุฏุฏุงุช_ ู_ุงูููุตุงุช_ ุงููุฎุตุตุฉ.

ูุจู ุชุทุจูู ุงูุถุจุท ุฃู ุงูุชุญุณููุ ูุญุชุงุฌ ุฃููุงู ุฅูู ุชุตุฏูุฑ ูููุฐุฌูุง ุฅูู ุชูุณูู ONNX.

```python
>>> from optimum.onnxruntime import ORTModelForSequenceClassification
>>> from transformers import AutoTokenizer

>>> model_checkpoint = "distilbert-base-uncased-finetuned-sst-2-english"
>>> save_directory = "tmp/onnx/"
>>> # ูู ุจุชุญููู ูููุฐุฌ ูู ุงููุญููุงุช ูุชุตุฏูุฑู ุฅูู ONNX
>>> ort_model = ORTModelForSequenceClassification.from_pretrained(model_checkpoint, export=True)
>>> tokenizer = AutoTokenizer.from_pretrained(model_checkpoint)
>>> # ุญูุธ ูููุฐุฌ onnx ููุญูู ุงูุฑููุฒ
>>> ort_model.save_pretrained(save_directory)
>>> tokenizer.save_pretrained(save_directory)  # doctest: +IGNORE_RESULT
```

ุฏุนููุง ูุฑู ุงูุขู ููู ูููููุง ุชุทุจูู ุงูุถุจุท ุงูุฏููุงูููู ูุน ONNX Runtime:

```python
>>> from optimum.onnxruntime.configuration import AutoQuantizationConfig
>>> from optimum.onnxruntime import ORTQuantizer
>>> # ุชุญุฏูุฏ ูููุฌูุฉ ุงูุถุจุท
>>> qconfig = AutoQuantizationConfig.arm64(is_static=False, per_channel=False)
>>> quantizer = ORTQuantizer.from_pretrained(ort_model)
>>> # ุชุทุจูู ุงูุถุจุท ุงูุฏููุงูููู ุนูู ุงููููุฐุฌ
>>> quantizer.quantize(save_dir=save_directory, quantization_config=qconfig)  # doctest: +IGNORE_RESULT
```

ูู ูุฐุง ุงููุซุงูุ ูููุง ุจุถุจุท ูููุฐุฌ ูู Hugging Face Hubุ ููููู ูุฏ ูููู ุฃูุถูุง ูุณุงุฑูุง ุฅูู ุฏููู ูููุฐุฌ ูุญูู. ูุงููุชูุฌุฉ ูู ุชุทุจูู ุทุฑููุฉ `quantize()` ูู ููู `model_quantized.onnx` ุงูุฐู ูููู ุงุณุชุฎุฏุงูู ูุชุดุบูู ุงูุงุณุชุฏูุงู. ูููุง ููู ูุซุงู ุนูู ููููุฉ ุชุญููู ูููุฐุฌ ONNX Runtime ูุฅูุดุงุก ุชูุจุคุงุช ุจู:

```python
>>> from optimum.onnxruntime import ORTModelForSequenceClassification
>>> from transformers import pipeline, AutoTokenizer
>>> model = ORTModelForSequenceClassification.from_pretrained(save_directory, file_name="model_quantized.onnx")
>>> tokenizer = AutoTokenizer.from_pretrained(save_directory)
>>> cls_pipeline = pipeline("text-classification", model=model, tokenizer=tokenizer)
>>> results = cls_pipeline("I love burritos!")
```

ูุจุงููุซูุ ููููู ุชุทุจูู ุงูุถุจุท ุงูุซุงุจุช ุจุจุณุงุทุฉ ุนู ุทุฑูู ุชุนููู `is_static` ุฅูู `True` ุนูุฏ ุฅูุดุงุก ูุงุฆู `QuantizationConfig`:

```python
>>> qconfig = AutoQuantizationConfig.arm64(is_static=True, per_channel=False)
```

ูุนุชูุฏ ุงูุถุจุท ุงูุซุงุจุช ุนูู ุชุบุฐูุฉ ุฏูุนุงุช ูู ุงูุจูุงูุงุช ุนุจุฑ ุงููููุฐุฌ ูุชูุฏูุฑ ูุนููุงุช ุถุจุท ุงูุชูุดูุท ูุจู ููุช ุงูุงุณุชุฏูุงู. ูุฏุนู ุฐููุ ูุณูุญ ูู ๐ค Optimum ุจุชูููุฑ _ูุฌููุนุฉ ูุนุงูุฑุฉ_. ูููู ุฃู ุชููู ูุฌููุนุฉ ุงููุนุงูุฑุฉ ูุงุฆู `Dataset` ุจุณูุท ูู ููุชุจุฉ ๐ค Datasetsุ ุฃู ุฃู ูุฌููุนุฉ ุจูุงูุงุช ูุณุชุถุงูุฉ ุนูู Hugging Face Hub. ุจุงููุณุจุฉ ููุฐุง ุงููุซุงูุ ุณูุฎุชุงุฑ ูุฌููุนุฉ ุจูุงูุงุช [`sst2`](https://huggingface.co/datasets/glue/viewer/sst2/test) ุงูุชู ุชู ุชุฏุฑูุจ ุงููููุฐุฌ ุนูููุง ูู ุงูุฃุตู:

```python
>>> from functools import partial
>>> from optimum.onnxruntime.configuration import AutoCalibrationConfig

# ุชุญุฏูุฏ ุฏุงูุฉ ุงููุนุงูุฌุฉ ูุชุทุจูููุง ุนูู ูู ูุซุงู ุจุนุฏ ุชุญููู ูุฌููุนุฉ ุงูุจูุงูุงุช
>>> def preprocess_fn(ex, tokenizer):
...     return tokenizer(ex["sentence"])

>>> # ุฅูุดุงุก ูุฌููุนุฉ ูุนุงูุฑุฉ
>>> calibration_dataset = quantizer.get_calibration_dataset(
...     "glue",
...     dataset_config_name="sst2",
...     preprocess_function=partial(preprocess_fn, tokenizer=tokenizer),
...     num_samples=50,
...     dataset_split="train",
... )
>>> # ุฅูุดุงุก ุชูููู ุงููุนุงูุฑุฉ ุงูุฐู ูุญุชูู ุนูู ุงููุนููุงุช ุงููุชุนููุฉ ุจุงููุนุงูุฑุฉ.
>>> calibration_config = AutoCalibrationConfig.minmax(calibration_dataset)
>>> # ุชูููุฐ ุฎุทูุฉ ุงููุนุงูุฑุฉ: ุญุณุงุจ ูุทุงูุงุช ุถุจุท ุงูุชูุดูุท
>>> ranges = quantizer.fit(
...     dataset=calibration_dataset,
...     calibration_config=calibration_config,
...     operators_to_quantize=qconfig.operators_to_quantize,
... )
>>> # ุชุทุจูู ุงูุถุจุท ุงูุซุงุจุช ุนูู ุงููููุฐุฌ
>>> quantizer.quantize(    # doctest: +IGNORE_RESULT
...     save_dir=save_directory,
...     calibration_tensors_range=ranges,
...     quantization_config=qconfig,
... )
```

ููุซุงู ุฃุฎูุฑุ ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ุชุทุจูู ุชูููุงุช _ุชุญุณูู ุงูุฑุณู ุงูุจูุงูู_ ูุซู ุฏูุฌ ุงููุดุบู ูุงูุทู ุงูุซุงุจุช. ููุง ูู ุงูุญุงู ุฏุงุฆููุงุ ูููู ุจุชุญููู ูุงุฆู ุชููููุ ูููู ูุฐู ุงููุฑุฉ ุนู ุทุฑูู ุชุนููู ูุณุชูู ุงูุชุญุณูู ุจุฏูุงู ูู ููุฌ ุงูุถุจุท:

```python
>>> from optimum.onnxruntime.configuration import OptimizationConfig

>>> # ููุง ุชู ุชุญุฏูุฏ ูุณุชูู ุงูุชุญุณูู ููููู 1ุ ููุง ููููู ุงูุชุญุณููุงุช ุงูุฃุณุงุณูุฉ ูุซู ุฅุฒุงูุฉ ุงูุนูุฏ ุงูุฒุงุฆุฏุฉ ูุงูุทู ุงูุซุงุจุช. ุณูุคุฏู ูุณุชูู ุงูุชุญุณูู ุงูุฃุนูู ุฅูู ุฑุณู ุจูุงูู ููุญุณูู ูุนุชูุฏ ุนูู ุงูุฃุฌูุฒุฉ.
>>> optimization_config = OptimizationConfig(optimization_level=1)
```

ุจุนุฏ ุฐููุ ูููู ุจุชุญููู _ูุญุณู_ ูุชุทุจูู ูุฐู ุงูุชุญุณููุงุช ุนูู ูููุฐุฌูุง:

```python
>>> from optimum.onnxruntime import ORTOptimizer

>>> optimizer = ORTOptimizer.from_pretrained(ort_model)

>>> # ุชุญุณูู ุงููููุฐุฌ
>>> optimizer.optimize(save_dir=save_directory, optimization_config=optimization_config)  # doctest: +IGNORE_RESULT
```

ููุฐุง ูู ูุง ูู ุงูุฃูุฑ - ุงููููุฐุฌ ูุญุณูู ูุฌุงูุฒ ููุงุณุชุฏูุงู! ููุง ุชุฑููุ ุงูุนูููุฉ ููุงุซูุฉ ูู ูู ุญุงูุฉ:

1. ุญุฏุฏ ุงุณุชุฑุงุชูุฌูุงุช ุงูุชุญุณูู / ุงูุถุจุท ุนุจุฑ ูุงุฆู `OptimizationConfig` / `QuantizationConfig`
2. ูู ุจุชููุฆุฉ ูุฆุฉ `ORTQuantizer` ุฃู `ORTOptimizer`
3. ุชุทุจูู ุทุฑููุฉ `quantize()` ุฃู `optimize()`
4. ุชุดุบูู ุงูุงุณุชุฏูุงู

ุชุญูู ูู ุฏููู [`examples`](https://github.com/huggingface/optimum/tree/main/examples) ููุงุณุชุฎุฏุงู ุงูุฃูุซุฑ ุชูุฏููุง.

ุณุนุฏุงุก ุจุงูุชุญุณูู ๐ค!